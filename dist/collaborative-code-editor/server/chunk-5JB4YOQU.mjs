import './polyfills.server.mjs';
import{a as ha,c as da,e as ua,i as fa,j as pa,k as ma,m as _a}from"./chunk-L47MOG3K.mjs";import{$ as ai,A as u,Aa as A,Ba as V,C as At,Ca as na,Cb as ca,Da as U,E as Hn,Ea as Z,F as qn,Fa as Gn,G as ea,Ga as oa,H as ta,Ha as et,I as R,Ia as gr,J as M,Ja as Yn,Ka as Xn,La as $n,Lb as la,M as qe,Ma as Kn,Na as Zn,Oa as S,P as It,Pa as vr,Q as oe,Qa as Qn,Ra as Jn,S as ia,Sa as eo,Ta as to,U as Pt,V as pr,W as ra,_ as se,a as cr,aa as Te,b as lr,ba as ci,c as O,ca as Qe,cb as io,d as hr,da as mr,ea as Vn,f as dr,g as Ln,ga as ee,h as Ks,ha as B,i as Zs,ia as Ae,ib as yr,j as ur,ja as Je,ka as _r,l as Qs,la as ge,m as De,ma as q,n as Bn,na as Ve,o as Js,p as He,q as jn,r as fr,rb as sa,s as Ze,sa as li,sb as aa,t as oi,ta as hi,vb as Ie,w as v,wa as Un,x as L,xa as Wn,y as N,ya as zn,z as si}from"./chunk-R7BEQ5AU.mjs";import{a as G,b as ar,c as m,e as f,f as Zu,h as J}from"./chunk-S6KH3LOX.mjs";var ct=f((sE,fc)=>{"use strict";var qf=m("crypto"),uc="abcdefghijklmnopqrstuvwxyz012345";fc.exports={string:function(e){for(var t=uc.length,i=qf.randomBytes(e),r=[],n=0;n<e;n++)r.push(uc.substr(i[n]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,i=new Array(t+1).join("0");return(i+this.number(e)).slice(-t)}}});var Ge=f((aE,Wr)=>{"use strict";var Vf=ct(),Wt={},ko=!1,pc=global.chrome&&global.chrome.app&&global.chrome.app.runtime;Wr.exports={attachEvent:function(e,t){typeof global.addEventListener<"u"?global.addEventListener(e,t,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+e,t),global.attachEvent("on"+e,t))},detachEvent:function(e,t){typeof global.addEventListener<"u"?global.removeEventListener(e,t,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+e,t),global.detachEvent("on"+e,t))},unloadAdd:function(e){if(pc)return null;var t=Vf.string(8);return Wt[t]=e,ko&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in Wt&&delete Wt[e]},triggerUnloadCallbacks:function(){for(var e in Wt)Wt[e](),delete Wt[e]}};var Uf=function(){ko||(ko=!0,Wr.exports.triggerUnloadCallbacks())};pc||Wr.exports.attachEvent("unload",Uf)});var _c=f((cE,mc)=>{"use strict";mc.exports=function(t,i){if(i=i.split(":")[0],t=+t,!t)return!1;switch(i){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}});var yc=f(Ro=>{"use strict";var Wf=Object.prototype.hasOwnProperty,zf;function gc(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function vc(e){try{return encodeURIComponent(e)}catch{return null}}function Gf(e){for(var t=/([^=?#&]+)=?([^&]*)/g,i={},r;r=t.exec(e);){var n=gc(r[1]),o=gc(r[2]);n===null||o===null||n in i||(i[n]=o)}return i}function Yf(e,t){t=t||"";var i=[],r,n;typeof t!="string"&&(t="?");for(n in e)if(Wf.call(e,n)){if(r=e[n],!r&&(r===null||r===zf||isNaN(r))&&(r=""),n=vc(n),r=vc(r),n===null||r===null)continue;i.push(n+"="+r)}return i.length?t+i.join("&"):""}Ro.stringify=Yf;Ro.parse=Gf});var Gr=f((hE,xc)=>{"use strict";var Ec=_c(),zr=yc(),Xf=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Cc=/[\n\r\t]/g,$f=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,wc=/:\d+$/,Kf=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Zf=/^[a-zA-Z]:/;function To(e){return(e||"").toString().replace(Xf,"")}var Do=[["#","hash"],["?","query"],function(t,i){return ve(i.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],bc={hash:1,query:1};function Sc(e){var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t={};var i=t.location||{};e=e||i;var r={},n=typeof e,o;if(e.protocol==="blob:")r=new ye(unescape(e.pathname),{});else if(n==="string"){r=new ye(e,{});for(o in bc)delete r[o]}else if(n==="object"){for(o in e)o in bc||(r[o]=e[o]);r.slashes===void 0&&(r.slashes=$f.test(e.href))}return r}function ve(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Oc(e,t){e=To(e),e=e.replace(Cc,""),t=t||{};var i=Kf.exec(e),r=i[1]?i[1].toLowerCase():"",n=!!i[2],o=!!i[3],s=0,a;return n?o?(a=i[2]+i[3]+i[4],s=i[2].length+i[3].length):(a=i[2]+i[4],s=i[2].length):o?(a=i[3]+i[4],s=i[3].length):a=i[4],r==="file:"?s>=2&&(a=a.slice(2)):ve(r)?a=i[4]:r?n&&(a=a.slice(2)):s>=2&&ve(t.protocol)&&(a=i[4]),{protocol:r,slashes:n||ve(r),slashesCount:s,rest:a}}function Qf(e,t){if(e==="")return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=i.length,n=i[r-1],o=!1,s=0;r--;)i[r]==="."?i.splice(r,1):i[r]===".."?(i.splice(r,1),s++):s&&(r===0&&(o=!0),i.splice(r,1),s--);return o&&i.unshift(""),(n==="."||n==="..")&&i.push(""),i.join("/")}function ye(e,t,i){if(e=To(e),e=e.replace(Cc,""),!(this instanceof ye))return new ye(e,t,i);var r,n,o,s,a,c,l=Do.slice(),d=typeof t,h=this,_=0;for(d!=="object"&&d!=="string"&&(i=t,t=null),i&&typeof i!="function"&&(i=zr.parse),t=Sc(t),n=Oc(e||"",t),r=!n.protocol&&!n.slashes,h.slashes=n.slashes||r&&t.slashes,h.protocol=n.protocol||t.protocol||"",e=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||Zf.test(e))||!n.slashes&&(n.protocol||n.slashesCount<2||!ve(h.protocol)))&&(l[3]=[/(.*)/,"pathname"]);_<l.length;_++){if(s=l[_],typeof s=="function"){e=s(e,h);continue}o=s[0],c=s[1],o!==o?h[c]=e:typeof o=="string"?(a=o==="@"?e.lastIndexOf(o):e.indexOf(o),~a&&(typeof s[2]=="number"?(h[c]=e.slice(0,a),e=e.slice(a+s[2])):(h[c]=e.slice(a),e=e.slice(0,a)))):(a=o.exec(e))&&(h[c]=a[1],e=e.slice(0,a.index)),h[c]=h[c]||r&&s[3]&&t[c]||"",s[4]&&(h[c]=h[c].toLowerCase())}i&&(h.query=i(h.query)),r&&t.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||t.pathname!=="")&&(h.pathname=Qf(h.pathname,t.pathname)),h.pathname.charAt(0)!=="/"&&ve(h.protocol)&&(h.pathname="/"+h.pathname),Ec(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(a=h.auth.indexOf(":"),~a?(h.username=h.auth.slice(0,a),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(a+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&ve(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function Jf(e,t,i){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(i||zr.parse)(t)),r[e]=t;break;case"port":r[e]=t,Ec(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,wc.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!i;break;case"pathname":case"hash":if(t){var n=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==n?n+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(r.username=t.slice(0,o),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(o+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var s=0;s<Do.length;s++){var a=Do[s];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&ve(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function ep(e){(!e||typeof e!="function")&&(e=zr.stringify);var t,i=this,r=i.host,n=i.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var o=n+(i.protocol&&i.slashes||ve(i.protocol)?"//":"");return i.username?(o+=i.username,i.password&&(o+=":"+i.password),o+="@"):i.password?(o+=":"+i.password,o+="@"):i.protocol!=="file:"&&ve(i.protocol)&&!r&&i.pathname!=="/"&&(o+="@"),(r[r.length-1]===":"||wc.test(i.hostname)&&!i.port)&&(r+=":"),o+=r+i.pathname,t=typeof i.query=="object"?e(i.query):i.query,t&&(o+=t.charAt(0)!=="?"?"?"+t:t),i.hash&&(o+=i.hash),o}ye.prototype={set:Jf,toString:ep};ye.extractProtocol=Oc;ye.location=Sc;ye.trimLeft=To;ye.qs=zr;xc.exports=ye});var Rc=f((dE,kc)=>{"use strict";var zt=1e3,Gt=zt*60,Yt=Gt*60,lt=Yt*24,tp=lt*7,ip=lt*365.25;kc.exports=function(e,t){t=t||{};var i=typeof e;if(i==="string"&&e.length>0)return rp(e);if(i==="number"&&isFinite(e))return t.long?op(e):np(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function rp(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return i*ip;case"weeks":case"week":case"w":return i*tp;case"days":case"day":case"d":return i*lt;case"hours":case"hour":case"hrs":case"hr":case"h":return i*Yt;case"minutes":case"minute":case"mins":case"min":case"m":return i*Gt;case"seconds":case"second":case"secs":case"sec":case"s":return i*zt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function np(e){var t=Math.abs(e);return t>=lt?Math.round(e/lt)+"d":t>=Yt?Math.round(e/Yt)+"h":t>=Gt?Math.round(e/Gt)+"m":t>=zt?Math.round(e/zt)+"s":e+"ms"}function op(e){var t=Math.abs(e);return t>=lt?Yr(e,t,lt,"day"):t>=Yt?Yr(e,t,Yt,"hour"):t>=Gt?Yr(e,t,Gt,"minute"):t>=zt?Yr(e,t,zt,"second"):e+" ms"}function Yr(e,t,i,r){var n=t>=i*1.5;return Math.round(e/i)+" "+r+(n?"s":"")}});var Ao=f((uE,Dc)=>{"use strict";function sp(e){i.debug=i,i.default=i,i.coerce=c,i.disable=s,i.enable=o,i.enabled=a,i.humanize=Rc(),Object.keys(e).forEach(function(l){i[l]=e[l]}),i.instances=[],i.names=[],i.skips=[],i.formatters={};function t(l){for(var d=0,h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return i.colors[Math.abs(d)%i.colors.length]}i.selectColor=t;function i(l){var d;function h(){if(h.enabled){for(var _=arguments.length,g=new Array(_),w=0;w<_;w++)g[w]=arguments[w];var k=h,E=Number(new Date),re=E-(d||E);k.diff=re,k.prev=d,k.curr=E,d=E,g[0]=i.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var K=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(me,xt){if(me==="%%")return me;K++;var Q=i.formatters[xt];if(typeof Q=="function"){var _e=g[K];me=Q.call(k,_e),g.splice(K,1),K--}return me}),i.formatArgs.call(k,g);var ke=k.log||i.log;ke.apply(k,g)}}return h.namespace=l,h.enabled=i.enabled(l),h.useColors=i.useColors(),h.color=t(l),h.destroy=r,h.extend=n,typeof i.init=="function"&&i.init(h),i.instances.push(h),h}function r(){var l=i.instances.indexOf(this);return l!==-1?(i.instances.splice(l,1),!0):!1}function n(l,d){return i(this.namespace+(typeof d>"u"?":":d)+l)}function o(l){i.save(l),i.names=[],i.skips=[];var d,h=(typeof l=="string"?l:"").split(/[\s,]+/),_=h.length;for(d=0;d<_;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.substr(1)+"$")):i.names.push(new RegExp("^"+l+"$")));for(d=0;d<i.instances.length;d++){var g=i.instances[d];g.enabled=i.enabled(g.namespace)}}function s(){i.enable("")}function a(l){if(l[l.length-1]==="*")return!0;var d,h;for(d=0,h=i.skips.length;d<h;d++)if(i.skips[d].test(l))return!1;for(d=0,h=i.names.length;d<h;d++)if(i.names[d].test(l))return!0;return!1}function c(l){return l instanceof Error?l.stack||l.message:l}return i.enable(i.load()),i}Dc.exports=sp});var Tc=f((ae,$r)=>{"use strict";function Xr(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xr=function(i){return typeof i}:Xr=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Xr(e)}ae.log=lp;ae.formatArgs=cp;ae.save=hp;ae.load=dp;ae.useColors=ap;ae.storage=up();ae.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ap(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function cp(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+$r.exports.humanize(this.diff),!!this.useColors){var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(n){n!=="%%"&&(i++,n==="%c"&&(r=i))}),e.splice(r,0,t)}}function lp(){var e;return(typeof console>"u"?"undefined":Xr(console))==="object"&&console.log&&(e=console).log.apply(e,arguments)}function hp(e){try{e?ae.storage.setItem("debug",e):ae.storage.removeItem("debug")}catch{}}function dp(){var e;try{e=ae.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function up(){try{return localStorage}catch{}}$r.exports=Ao()(ae);var fp=$r.exports.formatters;fp.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Ic=f((fE,Ac)=>{"use strict";Ac.exports=(e,t=process.argv)=>{let i=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(i+e),n=t.indexOf("--");return r!==-1&&(n===-1||r<n)}});var Mc=f((pE,Nc)=>{"use strict";var pp=m("os"),Pc=m("tty"),ce=Ic(),{env:W}=process,Ye;ce("no-color")||ce("no-colors")||ce("color=false")||ce("color=never")?Ye=0:(ce("color")||ce("colors")||ce("color=true")||ce("color=always"))&&(Ye=1);"FORCE_COLOR"in W&&(W.FORCE_COLOR==="true"?Ye=1:W.FORCE_COLOR==="false"?Ye=0:Ye=W.FORCE_COLOR.length===0?1:Math.min(parseInt(W.FORCE_COLOR,10),3));function Io(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Po(e,t){if(Ye===0)return 0;if(ce("color=16m")||ce("color=full")||ce("color=truecolor"))return 3;if(ce("color=256"))return 2;if(e&&!t&&Ye===void 0)return 0;let i=Ye||0;if(W.TERM==="dumb")return i;if(process.platform==="win32"){let r=pp.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in W)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in W)||W.CI_NAME==="codeship"?1:i;if("TEAMCITY_VERSION"in W)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(W.TEAMCITY_VERSION)?1:0;if(W.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in W){let r=parseInt((W.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(W.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(W.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(W.TERM)||"COLORTERM"in W?1:i}function mp(e){let t=Po(e,e&&e.isTTY);return Io(t)}Nc.exports={supportsColor:mp,stdout:Io(Po(!0,Pc.isatty(1))),stderr:Io(Po(!0,Pc.isatty(2)))}});var Lc=f((Y,Qr)=>{"use strict";var _p=m("tty"),Zr=m("util");Y.init=wp;Y.log=bp;Y.formatArgs=vp;Y.save=Ep;Y.load=Cp;Y.useColors=gp;Y.colors=[6,2,3,4,5,1];try{Kr=Mc(),Kr&&(Kr.stderr||Kr).level>=2&&(Y.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}var Kr;Y.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var i=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(n,o){return o.toUpperCase()}),r=process.env[t];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),e[i]=r,e},{});function gp(){return"colors"in Y.inspectOpts?!!Y.inspectOpts.colors:_p.isatty(process.stderr.fd)}function vp(e){var t=this.namespace,i=this.useColors;if(i){var r=this.color,n="\x1B[3"+(r<8?r:"8;5;"+r),o="  ".concat(n,";1m").concat(t," \x1B[0m");e[0]=o+e[0].split(`
`).join(`
`+o),e.push(n+"m+"+Qr.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=yp()+t+" "+e[0]}function yp(){return Y.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bp(){return process.stderr.write(Zr.format.apply(Zr,arguments)+`
`)}function Ep(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function Cp(){return process.env.DEBUG}function wp(e){e.inspectOpts={};for(var t=Object.keys(Y.inspectOpts),i=0;i<t.length;i++)e.inspectOpts[t[i]]=Y.inspectOpts[t[i]]}Qr.exports=Ao()(Y);var Fc=Qr.exports.formatters;Fc.o=function(e){return this.inspectOpts.colors=this.useColors,Zr.inspect(e,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")};Fc.O=function(e){return this.inspectOpts.colors=this.useColors,Zr.inspect(e,this.inspectOpts)}});var D=f((mE,No)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?No.exports=Tc():No.exports=Lc()});var le=f((_E,jc)=>{"use strict";var Sp=Gr(),Bc=function(){};process.env.NODE_ENV!=="production"&&(Bc=D()("sockjs-client:utils:url"));jc.exports={getOrigin:function(e){if(!e)return null;var t=new Sp(e);if(t.protocol==="file:")return null;var i=t.port;return i||(i=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+i},isOriginEqual:function(e,t){var i=this.getOrigin(e)===this.getOrigin(t);return Bc("same",e,t,i),i},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var i=e.split("?");return i[0]+t+(i[1]?"?"+i[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}});var Hc=f((gE,Mo)=>{"use strict";typeof Object.create=="function"?Mo.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Mo.exports=function(t,i){if(i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}}});var b=f((vE,Lo)=>{"use strict";try{if(Fo=m("util"),typeof Fo.inherits!="function")throw"";Lo.exports=Fo.inherits}catch{Lo.exports=Hc()}var Fo});var Ee=f((Bo,Vc)=>{"use strict";var Jr=m("buffer"),be=Jr.Buffer;function qc(e,t){for(var i in e)t[i]=e[i]}be.from&&be.alloc&&be.allocUnsafe&&be.allocUnsafeSlow?Vc.exports=Jr:(qc(Jr,Bo),Bo.Buffer=ht);function ht(e,t,i){return be(e,t,i)}ht.prototype=Object.create(be.prototype);qc(be,ht);ht.from=function(e,t,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return be(e,t,i)};ht.alloc=function(e,t,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=be(e);return t!==void 0?typeof i=="string"?r.fill(t,i):r.fill(t):r.fill(0),r};ht.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return be(e)};ht.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Jr.SlowBuffer(e)}});var zc=f(jo=>{"use strict";var Uc=m("stream").Stream,Wc=m("util"),dt=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};Wc.inherits(dt,Uc);dt.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0};dt.prototype.resume=function(){this._paused=!1,this.emit("drain");var e=this._driver.messages;e._paused=!1,e.emit("drain")};dt.prototype.write=function(e){return this.writable?(this._driver.parse(e),!this._paused):!1};dt.prototype.end=function(e){if(this.writable){e!==void 0&&this.write(e),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}};dt.prototype.destroy=function(){this.end()};var ut=function(e){this.readable=this.writable=!0,this._paused=!1,this._driver=e};Wc.inherits(ut,Uc);ut.prototype.pause=function(){this._driver.io._paused=!0};ut.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")};ut.prototype.write=function(e){return this.writable?(typeof e=="string"?this._driver.text(e):this._driver.binary(e),!this._paused):!1};ut.prototype.end=function(e){e!==void 0&&this.write(e)};ut.prototype.destroy=function(){};jo.IO=dt;jo.Messages=ut});var en=f((bE,Gc)=>{"use strict";var Xt=function(){this.clear()};Xt.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"];Xt.prototype.clear=function(){this._sent={},this._lines=[]};Xt.prototype.set=function(e,t){if(t!==void 0){e=this._strip(e),t=this._strip(t);var i=e.toLowerCase();(!this._sent.hasOwnProperty(i)||this.ALLOWED_DUPLICATES.indexOf(i)>=0)&&(this._sent[i]=!0,this._lines.push(e+": "+t+`\r
`))}};Xt.prototype.toString=function(){return this._lines.join("")};Xt.prototype._strip=function(e){return e.toString().replace(/^ */,"").replace(/ *$/,"")};Gc.exports=Xt});var Xc=f((EE,Yc)=>{"use strict";var tn=Ee().Buffer,rn=function(){this._queue=[],this._queueSize=0,this._offset=0};rn.prototype.put=function(e){!e||e.length===0||(tn.isBuffer(e)||(e=tn.from(e)),this._queue.push(e),this._queueSize+=e.length)};rn.prototype.read=function(e){if(e>this._queueSize)return null;if(e===0)return tn.alloc(0);this._queueSize-=e;var t=this._queue,i=e,r=t[0],n,o;if(r.length>=e)return r.length===e?t.shift():(o=r.slice(0,e),t[0]=r.slice(e),o);for(var s=0,a=t.length;s<a&&!(i<t[s].length);s++)i-=t[s].length;return n=t.splice(0,s),i>0&&t.length>0&&(n.push(t[0].slice(0,i)),t[0]=t[0].slice(i)),tn.concat(n,e)};rn.prototype.eachByte=function(e,t){for(var i,r,n;this._queue.length>0;){for(i=this._queue[0],r=i.length;this._offset<r;)n=this._offset,this._offset+=1,e.call(t,i[n]);this._offset=0,this._queue.shift()}};Yc.exports=rn});var Xe=f((CE,el)=>{"use strict";var $c=Ee().Buffer,Qc=m("events").EventEmitter,Op=m("util"),Kc=zc(),Jc=en(),xp=Xc(),X=function(e,t,i){Qc.call(this),X.validateOptions(i||{},["maxLength","masking","requireMasking","protocols"]),this._request=e,this._reader=new xp,this._options=i||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new Jc,this.__queue=[],this.readyState=0,this.url=t,this.io=new Kc.IO(this),this.messages=new Kc.Messages(this),this._bindEventListeners()};Op.inherits(X,Qc);X.isWebSocket=function(e){var t=e.headers.connection||"",i=e.headers.upgrade||"";return e.method==="GET"&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&i.toLowerCase()==="websocket"};X.validateOptions=function(e,t){for(var i in e)if(t.indexOf(i)<0)throw new Error("Unrecognized option: "+i)};var Zc={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var e=this;this.messages.on("error",function(){}),this.on("message",function(t){var i=e.messages;i.readable&&i.emit("data",t.data)}),this.on("error",function(t){var i=e.messages;i.readable&&i.emit("error",t)}),this.on("close",function(){var t=e.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(e){return!1},setHeader:function(e,t){return this.readyState>0?!1:(this._headers.set(e,t),!0)},start:function(){if(this.readyState!==0)return!1;if(!X.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var e;try{e=this._handshakeResponse()}catch(t){return this._failHandshake(t)}return this._write(e),this._stage!==-1&&this._open(),!0},_failHandshake:function(e){var t=new Jc;return t.set("Content-Type","text/plain"),t.set("Content-Length",$c.byteLength(e.message,"utf8")),t=["HTTP/1.1 400 Bad Request",t.toString(),e.message],this._write($c.from(t.join(`\r
`),"utf8")),this._fail("protocol_error",e.message),!1},text:function(e){return this.frame(e)},binary:function(e){return!1},ping:function(){return!1},pong:function(){return!1},close:function(e,t){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new X.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(e){this.frame.apply(this,e)},this),this.__queue=[],this.emit("open",new X.OpenEvent)},_queue:function(e){return this.__queue.push(e),!0},_write:function(e){var t=this.io;t.readable&&t.emit("data",e)},_fail:function(e,t){this.readyState=2,this.emit("error",new Error(t)),this.close()}};for(Ho in Zc)X.prototype[Ho]=Zc[Ho];var Ho;X.ConnectEvent=function(){};X.OpenEvent=function(){};X.CloseEvent=function(e,t){this.code=e,this.reason=t};X.MessageEvent=function(e){this.data=e};X.PingEvent=function(e){this.data=e};X.PongEvent=function(e){this.data=e};el.exports=X});var ol=f(Uo=>{"use strict";Uo.HTTPParser=p;function p(e){if(e!==void 0&&e!==p.REQUEST&&e!==p.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");e===void 0||this.initialize(e),this.maxHeaderSize=p.maxHeaderSize}p.prototype.initialize=function(e,t){if(e!==p.REQUEST&&e!==p.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");this.type=e,this.state=e+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1};p.encoding="ascii";p.maxHeaderSize=80*1024;p.REQUEST="REQUEST";p.RESPONSE="RESPONSE";var tl=p.kOnHeaders=1,qo=p.kOnHeadersComplete=2,nn=p.kOnBody=3,Vo=p.kOnMessageComplete=4;p.prototype[tl]=p.prototype[qo]=p.prototype[nn]=p.prototype[Vo]=function(){};var il=!0;Object.defineProperty(p,"kOnExecute",{get:function(){return il=!1,99}});var rl=Uo.methods=p.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],nl=rl.indexOf("CONNECT");p.prototype.reinitialize=p;p.prototype.close=p.prototype.pause=p.prototype.resume=p.prototype.remove=p.prototype.free=function(){};p.prototype._compatMode0_11=!1;p.prototype.getAsyncId=function(){return 0};var kp={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};p.prototype.execute=function(e,t,i){if(!(this instanceof p))throw new TypeError("not a HTTPParser");t=t||0,i=typeof i=="number"?i:e.length,this.chunk=e,this.offset=t;var r=this.end=t+i;try{for(;this.offset<r&&!this[this.state](););}catch(n){if(this.isUserCall)throw n;return this.hadError=!0,n}return this.chunk=null,i=this.offset-t,kp[this.state]&&(this.headerSize+=i,this.headerSize>(this.maxHeaderSize||p.maxHeaderSize))?new Error("max header size exceeded"):i};var Rp={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};p.prototype.finish=function(){if(!this.hadError){if(!Rp[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[Vo]())}};p.prototype.consume=p.prototype.unconsume=p.prototype.getCurrentBuffer=function(){};p.prototype.userCall=function(){this.isUserCall=!0;var e=this;return function(t){return e.isUserCall=!1,t}};p.prototype.nextRequest=function(){this.userCall()(this[Vo]()),this.reinitialize(this.type)};p.prototype.consumeLine=function(){for(var e=this.end,t=this.chunk,i=this.offset;i<e;i++)if(t[i]===10){var r=this.line+t.toString(p.encoding,this.offset,i);return r.charAt(r.length-1)==="\r"&&(r=r.substr(0,r.length-1)),this.line="",this.offset=i+1,r}this.line+=t.toString(p.encoding,this.offset,this.end),this.offset=this.end};var Dp=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,Tp=/^[ \t]+(.*[^ \t])/;p.prototype.parseHeader=function(e,t){if(e.indexOf("\r")!==-1)throw on("HPE_LF_EXPECTED");var i=Dp.exec(e),r=i&&i[1];if(r)t.push(r),t.push(i[2]);else{var n=Tp.exec(e);n&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=n[1])}};var Ap=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;p.prototype.REQUEST_LINE=function(){var e=this.consumeLine();if(e){var t=Ap.exec(e);if(t===null)throw on("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:rl.indexOf(t[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var Ip=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;p.prototype.RESPONSE_LINE=function(){var e=this.consumeLine();if(e){var t=Ip.exec(e);if(t===null)throw on("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var i=this.info.statusCode=+t[3];this.info.statusMessage=t[4],((i/100|0)===1||i===204||i===304)&&(this.body_bytes=0),this.state="HEADER"}};p.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)};p.prototype.HEADER=function(){var e=this.consumeLine();if(e!==void 0){var t=this.info;if(e)this.parseHeader(e,t.headers);else{for(var i=t.headers,r=!1,n,o=!1,s=0;s<i.length;s+=2)switch(i[s].toLowerCase()){case"transfer-encoding":this.isChunked=i[s+1].toLowerCase()==="chunked";break;case"content-length":if(n=+i[s+1],r){if(n!==this.body_bytes)throw on("HPE_UNEXPECTED_CONTENT_LENGTH")}else r=!0,this.body_bytes=n;break;case"connection":this.connection+=i[s+1].toLowerCase();break;case"upgrade":o=!0;break}this.isChunked&&r&&(r=!1,this.body_bytes=null),o&&this.connection.indexOf("upgrade")!=-1?t.upgrade=this.type===p.REQUEST||t.statusCode===101:t.upgrade=t.method===nl,this.isChunked&&t.upgrade&&(this.isChunked=!1),t.shouldKeepAlive=this.shouldKeepAlive();var a;if(il?a=this.userCall()(this[qo](t)):a=this.userCall()(this[qo](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive)),a===2)return this.nextRequest(),!0;if(this.isChunked&&!a)this.state="BODY_CHUNKHEAD";else{if(a||this.body_bytes===0)return this.nextRequest(),t.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}};p.prototype.BODY_CHUNKHEAD=function(){var e=this.consumeLine();e!==void 0&&(this.body_bytes=parseInt(e,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")};p.prototype.BODY_CHUNK=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[nn](this.chunk.slice(this.offset,this.offset+e),0,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")};p.prototype.BODY_CHUNKEMPTYLINE=function(){var e=this.consumeLine();if(e!==void 0){if(e!=="")throw new Error("Expected empty line");this.state="BODY_CHUNKHEAD"}};p.prototype.BODY_CHUNKTRAILERS=function(){var e=this.consumeLine();e!==void 0&&(e?this.parseHeader(e,this.trailers):(this.trailers.length&&this.userCall()(this[tl](this.trailers,"")),this.nextRequest()))};p.prototype.BODY_RAW=function(){this.userCall()(this[nn](this.chunk.slice(this.offset,this.end),0,this.end-this.offset)),this.offset=this.end};p.prototype.BODY_SIZED=function(){var e=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[nn](this.chunk.slice(this.offset,this.offset+e),0,e)),this.offset+=e,this.body_bytes-=e,this.body_bytes||this.nextRequest()};["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(e){var t=p["kOn"+e];Object.defineProperty(p.prototype,"on"+e,{get:function(){return this[t]},set:function(i){return this._compatMode0_11=!0,nl="CONNECT",this[t]=i}})});function on(e){var t=new Error("Parse Error");return t.code=e,t}});var an=f((SE,al)=>{"use strict";var sn=ol().HTTPParser,Pp=Ee().Buffer,Np={request:sn.REQUEST||"request",response:sn.RESPONSE||"response"},$=function(e){this._type=e,this._parser=new sn(Np[e]),this._complete=!1,this.headers={};var t=null,i=this;this._parser.onHeaderField=function(r,n,o){t=r.toString("utf8",n,n+o).toLowerCase()},this._parser.onHeaderValue=function(r,n,o){var s=r.toString("utf8",n,n+o);i.headers.hasOwnProperty(t)?i.headers[t]+=", "+s:i.headers[t]=s},this._parser.onHeadersComplete=this._parser[sn.kOnHeadersComplete]=function(r,n,o,s,a,c){var l=arguments[0];if(typeof l=="object"&&(s=l.method,a=l.url,c=l.statusCode,o=l.headers),i.method=typeof s=="number"?$.METHODS[s]:s,i.statusCode=c,i.url=a,!!o){for(var d=0,h=o.length,_,g;d<h;d+=2)_=o[d].toLowerCase(),g=o[d+1],i.headers.hasOwnProperty(_)?i.headers[_]+=", "+g:i.headers[_]=g;i._complete=!0}}};$.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var sl=process.version?process.version.match(/[0-9]+/g).map(function(e){return parseInt(e,10)}):[];sl[0]===0&&sl[1]===12&&($.METHODS[16]="REPORT",$.METHODS[17]="MKACTIVITY",$.METHODS[18]="CHECKOUT",$.METHODS[19]="MERGE",$.METHODS[20]="M-SEARCH",$.METHODS[21]="NOTIFY",$.METHODS[22]="SUBSCRIBE",$.METHODS[23]="UNSUBSCRIBE",$.METHODS[24]="PATCH",$.METHODS[25]="PURGE");$.prototype.isComplete=function(){return this._complete};$.prototype.parse=function(e){var t=this._parser.execute(e,0,e.length);if(typeof t!="number"){this.error=t,this._complete=!0;return}this._complete&&(this.body=t<e.length?e.slice(t):Pp.alloc(0))};al.exports=$});var hl=f((OE,ll)=>{"use strict";var Wo=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,Mp=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,Fp=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,zo=new RegExp(Wo.source+"(?:=(?:"+Wo.source+"|"+Fp.source+"))?"),Go=new RegExp(Wo.source+"(?: *; *"+zo.source+")*","g"),Lp=new RegExp("^"+Go.source+"(?: *, *"+Go.source+")*$"),Bp=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,cl=Object.prototype.hasOwnProperty,jp={parseHeader:function(e){var t=new xi;if(e===""||e===void 0)return t;if(!Lp.test(e))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+e);var i=e.match(Go);return i.forEach(function(r){var n=r.match(new RegExp(zo.source,"g")),o=n.shift(),s={};n.forEach(function(a){var c=a.match(zo),l=c[1],d;c[2]!==void 0?d=c[2]:c[3]!==void 0?d=c[3].replace(/\\/g,""):d=!0,Bp.test(d)&&(d=parseFloat(d)),cl.call(s,l)?(s[l]=[].concat(s[l]),s[l].push(d)):s[l]=d},this),t.push(o,s)},this),t},serializeParams:function(e,t){var i=[],r=function(o,s){s instanceof Array?s.forEach(function(a){r(o,a)}):s===!0?i.push(o):typeof s=="number"?i.push(o+"="+s):Mp.test(s)?i.push(o+'="'+s.replace(/"/g,'\\"')+'"'):i.push(o+"="+s)};for(var n in t)r(n,t[n]);return[e].concat(i).join("; ")}},xi=function(){this._byName={},this._inOrder=[]};xi.prototype.push=function(e,t){cl.call(this._byName,e)||(this._byName[e]=[]),this._byName[e].push(t),this._inOrder.push({name:e,params:t})};xi.prototype.eachOffer=function(e,t){for(var i=this._inOrder,r=0,n=i.length;r<n;r++)e.call(t,i[r].name,i[r].params)};xi.prototype.byName=function(e){return this._byName[e]||[]};xi.prototype.toArray=function(){return this._inOrder.slice()};ll.exports=jp});var Yo=f((xE,dl)=>{"use strict";var ki=function(e){this._bufferSize=e,this.clear()};ki.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0};ki.prototype.push=function(e){var t=!1,i=!1;this._ringSize<this._bufferSize?t=this._tail===0:this._ringOffset===this._ringSize&&(t=!0,i=this._tail===0),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,i&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=e,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize};ki.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]};ki.prototype.shift=function(){if(this.length!==0){var e=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,e}};dl.exports=ki});var fl=f((kE,ul)=>{"use strict";var Hp=Yo(),$t=function(e,t){this._session=e,this._method=t,this._queue=new Hp($t.QUEUE_SIZE),this._stopped=!1,this.pending=0};$t.QUEUE_SIZE=8;$t.prototype.call=function(e,t,i,r){if(!this._stopped){var n={error:e,message:t,callback:i,context:r,done:!1},o=!1,s=this;if(this._queue.push(n),n.error)return n.done=!0,this._stop(),this._flushQueue();var a=function(c,l){o^(o=!0)&&(c?(s._stop(),n.error=c,n.message=null):n.message=l,n.done=!0,s._flushQueue())};try{this._session[this._method](t,a)}catch(c){a(c)}}};$t.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0};$t.prototype._flushQueue=function(){for(var e=this._queue,t;e.length>0&&e.peek().done;)t=e.shift(),t.error?(this.pending=0,e.clear()):this.pending-=1,t.callback.call(t.context,t.error,t.message)};ul.exports=$t});var Xo=f((RE,pl)=>{"use strict";var qp=Yo(),ft=function(){this._complete=!1,this._callbacks=new qp(ft.QUEUE_SIZE)};ft.QUEUE_SIZE=4;ft.all=function(e){var t=new ft,i=e.length,r=i;for(i===0&&t.done();r--;)e[r].then(function(){i-=1,i===0&&t.done()});return t};ft.prototype.then=function(e){this._complete?e():this._callbacks.push(e)};ft.prototype.done=function(){this._complete=!0;for(var e=this._callbacks,t;t=e.shift();)t()};pl.exports=ft});var gl=f((DE,_l)=>{"use strict";var ml=fl(),Vp=Xo(),pt=function(e){this._ext=e[0],this._session=e[1],this._functors={incoming:new ml(this._session,"processIncomingMessage"),outgoing:new ml(this._session,"processOutgoingMessage")}};pt.prototype.pending=function(e){var t=this._functors[e];t._stopped||(t.pending+=1)};pt.prototype.incoming=function(e,t,i,r){this._exec("incoming",e,t,i,r)};pt.prototype.outgoing=function(e,t,i,r){this._exec("outgoing",e,t,i,r)};pt.prototype.close=function(){return this._closed=this._closed||new Vp,this._doClose(),this._closed};pt.prototype._exec=function(e,t,i,r,n){this._functors[e].call(t,i,function(o,s){o&&(o.message=this._ext.name+": "+o.message),r.call(n,o,s),this._doClose()},this)};pt.prototype._doClose=function(){var e=this._functors.incoming,t=this._functors.outgoing;!this._closed||e.pending+t.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};_l.exports=pt});var yl=f((TE,vl)=>{"use strict";var Up=gl(),Wp=Xo(),Ri=function(e){this._cells=e.map(function(t){return new Up(t)}),this._stopped={incoming:!1,outgoing:!1}};Ri.prototype.processIncomingMessage=function(e,t,i){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,e,t,i)};Ri.prototype.processOutgoingMessage=function(e,t,i){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,e,t,i)};Ri.prototype.close=function(e,t){this._stopped={incoming:!0,outgoing:!0};var i=this._cells.map(function(r){return r.close()});e&&Wp.all(i).then(function(){e.call(t)})};Ri.prototype._loop=function(e,t,i,r,n,o,s){for(var a=this._cells,c=a.length,l=this;c--;)a[c].pending(e);var d=function(h,_,g){if(h===i)return o.call(s,_,g);a[h][e](_,g,function(w,k){w&&(l._stopped[e]=!0),d(h+r,w,k)})};d(t,null,n)};vl.exports=Ri});var wl=f((AE,Cl)=>{"use strict";var Di=hl(),bl=yl(),cn=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};cn.MESSAGE_OPCODES=[1,2];var El={add:function(e){if(typeof e.name!="string")throw new TypeError("extension.name must be a string");if(e.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof e.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof e.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof e.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(e.name))throw new TypeError('An extension with name "'+e.name+'" is already registered');this._byName[e.name]=e,this._inOrder.push(e)},generateOffer:function(){var e=[],t=[],i={};return this._inOrder.forEach(function(r){var n=r.createClientSession();if(n){var o=[r,n];e.push(o),i[r.name]=o;var s=n.generateOffer();s=s?[].concat(s):[],s.forEach(function(a){t.push(Di.serializeParams(r.name,a))},this)}},this),this._sessions=e,this._index=i,t.length>0?t.join(", "):null},activate:function(e){var t=Di.parseHeader(e),i=[];t.eachOffer(function(r,n){var o=this._index[r];if(!o)throw new Error('Server sent an extension response for unknown extension "'+r+'"');var s=o[0],a=o[1],c=this._reserved(s);if(c)throw new Error("Server sent two extension responses that use the RSV"+c[0]+' bit: "'+c[1]+'" and "'+s.name+'"');if(a.activate(n)!==!0)throw new Error("Server sent unacceptable extension parameters: "+Di.serializeParams(r,n));this._reserve(s),i.push(o)},this),this._sessions=i,this._pipeline=new bl(i)},generateResponse:function(e){var t=[],i=[],r=Di.parseHeader(e);return this._inOrder.forEach(function(n){var o=r.byName(n.name);if(!(o.length===0||this._reserved(n))){var s=n.createServerSession(o);s&&(this._reserve(n),t.push([n,s]),i.push(Di.serializeParams(n.name,s.generateResponse())))}},this),this._sessions=t,this._pipeline=new bl(t),i.length>0?i.join(", "):null},validFrameRsv:function(e){var t={rsv1:!1,rsv2:!1,rsv3:!1},i;if(cn.MESSAGE_OPCODES.indexOf(e.opcode)>=0)for(var r=0,n=this._sessions.length;r<n;r++)i=this._sessions[r][0],t.rsv1=t.rsv1||i.rsv1,t.rsv2=t.rsv2||i.rsv2,t.rsv3=t.rsv3||i.rsv3;return(t.rsv1||!e.rsv1)&&(t.rsv2||!e.rsv2)&&(t.rsv3||!e.rsv3)},processIncomingMessage:function(e,t,i){this._pipeline.processIncomingMessage(e,t,i)},processOutgoingMessage:function(e,t,i){this._pipeline.processOutgoingMessage(e,t,i)},close:function(e,t){if(!this._pipeline)return e.call(t);this._pipeline.close(e,t)},_reserve:function(e){this._rsv1=this._rsv1||e.rsv1&&e.name,this._rsv2=this._rsv2||e.rsv2&&e.name,this._rsv3=this._rsv3||e.rsv3&&e.name},_reserved:function(e){return this._rsv1&&e.rsv1?[1,this._rsv1]:this._rsv2&&e.rsv2?[2,this._rsv2]:this._rsv3&&e.rsv3?[3,this._rsv3]:!1}};for($o in El)cn.prototype[$o]=El[$o];var $o;Cl.exports=cn});var kl=f((IE,xl)=>{"use strict";var Ol=function(){},Sl={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(Ko in Sl)Ol.prototype[Ko]=Sl[Ko];var Ko;xl.exports=Ol});var Al=f((PE,Tl)=>{"use strict";var zp=Ee().Buffer,Dl=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},Rl={read:function(){return this.data=this.data||zp.concat(this._chunks,this.length)},pushFrame:function(e){this.rsv1=this.rsv1||e.rsv1,this.rsv2=this.rsv2||e.rsv2,this.rsv3=this.rsv3||e.rsv3,this.opcode===null&&(this.opcode=e.opcode),this._chunks.push(e.payload),this.length+=e.length}};for(Zo in Rl)Dl.prototype[Zo]=Rl[Zo];var Zo;Tl.exports=Dl});var Jo=f((NE,Fl)=>{"use strict";var Ti=Ee().Buffer,Ml=m("crypto"),Gp=m("util"),Yp=wl(),mt=Xe(),Il=kl(),Pl=Al(),te=function(e,t,i){if(mt.apply(this,arguments),this._extensions=new Yp,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var r=this._request.headers["sec-websocket-protocol"],n=this._protocols;r!==void 0&&(typeof r=="string"&&(r=r.split(/ *, */)),this.protocol=r.filter(function(o){return n.indexOf(o)>=0})[0]),this.version="hybi-"+te.VERSION}};Gp.inherits(te,mt);te.VERSION="13";te.mask=function(e,t,i){if(!t||t.length===0)return e;i=i||0;for(var r=0,n=e.length-i;r<n;r++)e[i+r]=e[i+r]^t[r%4];return e};te.generateAccept=function(e){var t=Ml.createHash("sha1");return t.update(e+te.GUID),t.digest("base64")};te.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var Nl={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(e){return this._extensions.add(e),!0},parse:function(e){this._reader.put(e);for(var t=!0;t;)switch(this._stage){case 0:t=this._reader.read(1),t&&this._parseOpcode(t[0]);break;case 1:t=this._reader.read(1),t&&this._parseLength(t[0]);break;case 2:t=this._reader.read(this._frame.lengthBytes),t&&this._parseExtendedLength(t);break;case 3:t=this._reader.read(4),t&&(this._stage=4,this._frame.maskingKey=t);break;case 4:t=this._reader.read(this._frame.length),t&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(e){return this.readyState>1?!1:this.frame(e,"text")},binary:function(e){return this.readyState>1?!1:this.frame(e,"binary")},ping:function(e,t){return this.readyState>1?!1:(e=e||"",t&&(this._pingCallbacks[e]=t),this.frame(e,"ping"))},pong:function(e){return this.readyState>1?!1:(e=e||"",this.frame(e,"pong"))},close:function(e,t){return e=e||"",t=t||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new mt.CloseEvent(t,e)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(e,"close",t)},this),!0):!1},frame:function(e,t,i){if(this.readyState<=0)return this._queue([e,t,i]);if(this.readyState>2)return!1;e instanceof Array&&(e=Ti.from(e)),typeof e=="number"&&(e=e.toString());var r=new Pl,n=typeof e=="string",o,s;r.rsv1=r.rsv2=r.rsv3=!1,r.opcode=this.OPCODES[t||(n?"text":"binary")],o=n?Ti.from(e,"utf8"):e,i&&(s=o,o=Ti.allocUnsafe(2+s.length),o.writeUInt16BE(i,0),s.copy(o,2)),r.data=o;var a=function(c){var l=new Il;l.final=!0,l.rsv1=c.rsv1,l.rsv2=c.rsv2,l.rsv3=c.rsv3,l.opcode=c.opcode,l.masked=!!this._masking,l.length=c.data.length,l.payload=c.data,l.masked&&(l.maskingKey=Ml.randomBytes(4)),this._sendFrame(l)};return this.MESSAGE_OPCODES.indexOf(r.opcode)>=0?this._extensions.processOutgoingMessage(r,function(c,l){if(c)return this._fail("extension_error",c.message);a.call(this,l)},this):a.call(this,r),!0},_sendFrame:function(e){var t=e.length,i=t<=125?2:t<=65535?4:10,r=i+(e.masked?4:0),n=Ti.allocUnsafe(r+t),o=e.masked?this.MASK:0;n[0]=(e.final?this.FIN:0)|(e.rsv1?this.RSV1:0)|(e.rsv2?this.RSV2:0)|(e.rsv3?this.RSV3:0)|e.opcode,t<=125?n[1]=o|t:t<=65535?(n[1]=o|126,n.writeUInt16BE(t,2)):(n[1]=o|127,n.writeUInt32BE(Math.floor(t/4294967296),2),n.writeUInt32BE(t%4294967296,6)),e.payload.copy(n,r),e.masked&&(e.maskingKey.copy(n,i),te.mask(n,e.maskingKey,r)),this._write(n)},_handshakeResponse:function(){var e=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==te.VERSION)throw new Error("Unsupported WebSocket version: "+t);if(typeof e!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",te.generateAccept(e)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var i=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);i&&this._headers.set("Sec-WebSocket-Extensions",i);var r="HTTP/1.1 101 Switching Protocols",n=[r,this._headers.toString(),""];return Ti.from(n.join(`\r
`),"utf8")},_shutdown:function(e,t,i){delete this._frame,delete this._message,this._stage=5;var r=this.readyState===1;this.readyState=2,this._extensions.close(function(){r&&this.frame(t,"close",e),this.readyState=3,i&&this.emit("error",new Error(t)),this.emit("close",new mt.CloseEvent(e,t))},this)},_fail:function(e,t){this.readyState>1||this._shutdown(this.ERRORS[e],t,!0)},_parseOpcode:function(e){var t=[this.RSV1,this.RSV2,this.RSV3].map(function(r){return(e&r)===r}),i=this._frame=new Il;if(i.final=(e&this.FIN)===this.FIN,i.rsv1=t[0],i.rsv2=t[1],i.rsv3=t[2],i.opcode=e&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(i))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(i.rsv1?1:0)+", reserved2 = "+(i.rsv2?1:0)+", reserved3 = "+(i.rsv3?1:0));if(this.OPCODE_CODES.indexOf(i.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+i.opcode);if(this.MESSAGE_OPCODES.indexOf(i.opcode)<0&&!i.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+i.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(i.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(e){var t=this._frame;if(t.masked=(e&this.MASK)===this.MASK,t.length=e&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=t.length===126?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(e){var t=this._frame;if(t.length=this._readUInt(e),this._stage=t.masked?3:4,this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);this._checkFrameLength()},_checkFrameLength:function(){var e=this._message?this._message.length:0;return e+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(e){var t=this._frame,i=t.payload=te.mask(e,t.maskingKey),r=t.opcode,n,o,s,a,c;if(delete this._frame,r===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(t)}if((r===this.OPCODES.text||r===this.OPCODES.binary)&&(this._message=new Pl,this._message.pushFrame(t)),t.final&&this.MESSAGE_OPCODES.indexOf(r)>=0)return this._emitMessage(this._message);r===this.OPCODES.close&&(o=i.length>=2?i.readUInt16BE(0):null,s=i.length>2?this._encode(i.slice(2)):null,i.length!==0&&!(o!==null&&o>=this.MIN_RESERVED_ERROR&&o<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(o)<0&&(o=this.ERRORS.protocol_error),(i.length>125||i.length>2&&!s)&&(o=this.ERRORS.protocol_error),this._shutdown(o||this.DEFAULT_ERROR_CODE,s||"")),r===this.OPCODES.ping&&(this.frame(i,"pong"),this.emit("ping",new mt.PingEvent(i.toString()))),r===this.OPCODES.pong&&(a=this._pingCallbacks,n=this._encode(i),c=a[n],delete a[n],c&&c(),this.emit("pong",new mt.PongEvent(i.toString())))},_emitMessage:function(t){var t=this._message;t.read(),delete this._message,this._extensions.processIncomingMessage(t,function(i,r){if(i)return this._fail("extension_error",i.message);var n=r.data;if(r.opcode===this.OPCODES.text&&(n=this._encode(n)),n===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new mt.MessageEvent(n))},this)},_encode:function(e){try{var t=e.toString("binary",0,e.length);if(!this.UTF8_MATCH.test(t))return null}catch{}return e.toString("utf8",0,e.length)},_readUInt:function(e){return e.length===2?e.readUInt16BE(0):e.readUInt32BE(0)*4294967296+e.readUInt32BE(4)}};for(Qo in Nl)te.prototype[Qo]=Nl[Qo];var Qo;Fl.exports=te});var ql=f((ME,Hl)=>{"use strict";var jl=Ee().Buffer,Xp=m("stream").Stream,Ll=m("url"),$p=m("util"),Kp=Xe(),Zp=en(),Qp=an(),Jp={"ws:":80,"wss:":443},ts=function(e,t,i){this._client=e,this._http=new Qp("response"),this._origin=typeof e.url=="object"?e.url:Ll.parse(e.url),this._url=typeof t=="object"?t:Ll.parse(t),this._options=i||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new Zp,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var r=this._url.auth&&jl.from(this._url.auth,"utf8").toString("base64");r&&this._headers.set("Proxy-Authorization","Basic "+r)};$p.inherits(ts,Xp);var Bl={setHeader:function(e,t){return this._state!==0?!1:(this._headers.set(e,t),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var e=this._origin,t=e.port||Jp[e.protocol],i="CONNECT "+e.hostname+":"+t+" HTTP/1.1",r=[i,this._headers.toString(),""];return this.emit("data",jl.from(r.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(e){if(!this.writable)return!1;if(this._http.parse(e),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new Kp.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}return this.end(),!this._paused},end:function(e){this.writable&&(e!==void 0&&this.write(e),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(es in Bl)ts.prototype[es]=Bl[es];var es;Hl.exports=ts});var zl=f((FE,Wl)=>{"use strict";var Ul=Ee().Buffer,em=m("crypto"),tm=m("url"),im=m("util"),rm=an(),nm=Xe(),Kt=Jo(),om=ql(),Ai=function(e,t){this.version="hybi-"+Kt.VERSION,Kt.call(this,null,e,t),this.readyState=-1,this._key=Ai.generateKey(),this._accept=Kt.generateAccept(this._key),this._http=new rm("response");var i=tm.parse(this.url),r=i.auth&&Ul.from(i.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(i.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(i.pathname||"/")+(i.search||""),this._headers.set("Host",i.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",Kt.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),r&&this._headers.set("Authorization","Basic "+r)};im.inherits(Ai,Kt);Ai.generateKey=function(){return em.randomBytes(16).toString("base64")};var Vl={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(e,t){return new om(this,e,t)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(e){if(this.readyState!==3){if(this.readyState>0)return Kt.prototype.parse.call(this,e);this._http.parse(e),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var e=this._extensions.generateOffer();e&&this._headers.set("Sec-WebSocket-Extensions",e);var t="GET "+this._pathname+" HTTP/1.1",i=[t,this._headers.toString(),""];return Ul.from(i.join(`\r
`),"utf8")},_failHandshake:function(e){e="Error during WebSocket handshake: "+e,this.readyState=3,this.emit("error",new Error(e)),this.emit("close",new nm.CloseEvent(this.ERRORS.protocol_error,e))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var e=this._http.headers,t=e.upgrade||"",i=e.connection||"",r=e["sec-websocket-accept"]||"",n=e["sec-websocket-protocol"]||"";if(t==="")return this._failHandshake("'Upgrade' header is missing");if(t.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(i==="")return this._failHandshake("'Connection' header is missing");if(i.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(r!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,n!==""){if(this._protocols.indexOf(n)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=n}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(o){return this._failHandshake(o.message)}}};for(is in Vl)Ai.prototype[is]=Vl[is];var is;Wl.exports=Ai});var os=f((LE,Yl)=>{"use strict";var ln=Ee().Buffer,hn=Xe(),sm=m("util"),ns=function(e,t,i){hn.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};sm.inherits(ns,hn);var Gl={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new hn.CloseEvent(null,null)),!0)},parse:function(e){this.readyState>1||(this._reader.put(e),this._reader.eachByte(function(t){var i;switch(this._stage){case-1:this._body.push(t),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(t);break;case 1:if(this._length=(t&127)+128*this._length,this._closing&&this._length===0)return this.close();(t&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(t===255)this._stage=0,i=ln.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new hn.MessageEvent(i));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(t),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(e){if(this.readyState===0)return this._queue([e]);if(this.readyState>1)return!1;typeof e!="string"&&(e=e.toString());var t=ln.byteLength(e),i=ln.allocUnsafe(t+2);return i[0]=0,i.write(e,1),i[i.length-1]=255,this._write(i),!0},_handshakeResponse:function(){var e="HTTP/1.1 101 Web Socket Protocol Handshake",t=[e,this._headers.toString(),""];return ln.from(t.join(`\r
`),"utf8")},_parseLeadingByte:function(e){(e&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(rs in Gl)ns.prototype[rs]=Gl[rs];var rs;Yl.exports=ns});var Ql=f((BE,Zl)=>{"use strict";var Ii=Ee().Buffer,am=Xe(),dn=os(),cm=m("crypto"),lm=m("util"),Xl=function(e){return parseInt((e.match(/[0-9]/g)||[]).join(""),10)},$l=function(e){return(e.match(/ /g)||[]).length},as=function(e,t,i){dn.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};lm.inherits(as,dn);var Kl={BODY_SIZE:8,start:function(){return dn.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(Ii.from([255,0])),this.readyState=3,this.emit("close",new am.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var a=this._request.headers,e=a["sec-websocket-key1"],t=a["sec-websocket-key2"];if(!e)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!t)throw new Error("Missing required header: Sec-WebSocket-Key2");var i=Xl(e),r=$l(e),n=Xl(t),o=$l(t);if(i%r!==0||n%o!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[i/r,n/o];var s="HTTP/1.1 101 WebSocket Protocol Handshake",a=[s,this._headers.toString(),""];return Ii.from(a.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var e=cm.createHash("md5"),t=Ii.allocUnsafe(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),Ii.from(this._body).copy(t,8,0,this.BODY_SIZE),e.update(t),Ii.from(e.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var e=this._handshakeSignature();e&&(this._write(e),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(e){if(e!==255)return dn.prototype._parseLeadingByte.call(this,e);this._closing=!0,this._length=0,this._stage=1}};for(ss in Kl)as.prototype[ss]=Kl[ss];var ss;Zl.exports=as});var eh=f((jE,Jl)=>{"use strict";var hm=m("util"),dm=an(),hs=Xe(),um=os(),fm=Ql(),pm=Jo(),_t=function(e){hs.call(this,null,null,e),this._http=new dm("request")};hm.inherits(_t,hs);var ls={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(e){if(this._delegate)return this._delegate.parse(e);if(this._http.parse(e),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=_t.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(i){this._delegate.on(i,function(r){t.emit(i,r)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new hs.ConnectEvent)}},_open:function(){this.__queue.forEach(function(e){this._delegate[e[0]].apply(this._delegate,e[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(e){ls[e]=function(){return this._delegate?this._delegate[e].apply(this._delegate,arguments):(this.__queue.push([e,arguments]),!0)}});for(cs in ls)_t.prototype[cs]=ls[cs];var cs;_t.isSecureRequest=function(e){if(e.connection&&e.connection.authorized!==void 0||e.socket&&e.socket.secure)return!0;var t=e.headers;return t?t.https==="on"||t["x-forwarded-ssl"]==="on"||t["x-forwarded-scheme"]==="https"||t["x-forwarded-proto"]==="https":!1};_t.determineUrl=function(e){var t=this.isSecureRequest(e)?"wss:":"ws:";return t+"//"+e.headers.host+e.url};_t.http=function(e,t){t=t||{},t.requireMasking===void 0&&(t.requireMasking=!0);var i=e.headers,r=i["sec-websocket-version"],n=i["sec-websocket-key"],o=i["sec-websocket-key1"],s=i["sec-websocket-key2"],a=this.determineUrl(e);return r||n?new pm(e,a,t):o||s?new fm(e,a,t):new um(e,a,t)};Jl.exports=_t});var Pi=f((HE,ih)=>{"use strict";var th=Xe(),mm=zl(),un=eh(),_m={client:function(e,t){return t=t||{},t.masking===void 0&&(t.masking=!0),new mm(e,t)},server:function(e){return e=e||{},e.requireMasking===void 0&&(e.requireMasking=!0),new un(e)},http:function(){return un.http.apply(un,arguments)},isSecureRequest:function(e){return un.isSecureRequest(e)},isWebSocket:function(e){return th.isWebSocket(e)},validateOptions:function(e,t){th.validateOptions(e,t)}};ih.exports=_m});var Ni=f((qE,rh)=>{"use strict";var gt=function(e,t){this.type=e;for(var i in t)this[i]=t[i]};gt.prototype.initEvent=function(e,t,i){this.type=e,this.bubbles=t,this.cancelable=i};gt.prototype.stopPropagation=function(){};gt.prototype.preventDefault=function(){};gt.CAPTURING_PHASE=1;gt.AT_TARGET=2;gt.BUBBLING_PHASE=3;rh.exports=gt});var ds=f((VE,nh)=>{"use strict";var gm=Ni(),vm={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(e,t,i){this.on(e,t)},removeEventListener:function(e,t,i){this.removeListener(e,t)},dispatchEvent:function(e){e.target=e.currentTarget=this,e.eventPhase=gm.AT_TARGET,this["on"+e.type]&&this["on"+e.type](e),this.emit(e.type,e)}};nh.exports=vm});var pn=f((UE,ah)=>{"use strict";var ym=m("stream").Stream,bm=m("util"),Em=Pi(),oh=ds(),fn=Ni(),x=function(e){e=e||{},Em.validateOptions(e,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=e.headers;if(t)for(var i in t)this._driver.setHeader(i,t[i]);var r=e.extensions;r&&[].concat(r).forEach(this._driver.addExtension,this._driver),this._ping=e.ping,this._pingId=0,this.readyState=x.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var n=this;this._driver.on("open",function(o){n._open()}),this._driver.on("message",function(o){n._receiveMessage(o.data)}),this._driver.on("close",function(o){n._beginClose(o.reason,o.code)}),this._driver.on("error",function(o){n._emitError(o.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){n.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){n._pingId+=1,n.ping(n._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};bm.inherits(x,ym);x.CONNECTING=0;x.OPEN=1;x.CLOSING=2;x.CLOSED=3;x.CLOSE_TIMEOUT=3e4;var sh={write:function(e){return this.send(e)},end:function(e){e!==void 0&&this.send(e),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(e){return this.readyState>x.OPEN?!1:(e instanceof Buffer||(e=String(e)),this._driver.messages.write(e))},ping:function(e,t){return this.readyState>x.OPEN?!1:this._driver.ping(e,t)},close:function(e,t){if(e===void 0&&(e=1e3),t===void 0&&(t=""),e!==1e3&&(e<3e3||e>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+e+" is neither.");if(this.readyState<x.CLOSING){var i=this;this._closeTimer=setTimeout(function(){i._beginClose("",1006)},x.CLOSE_TIMEOUT)}this.readyState!==x.CLOSED&&(this.readyState=x.CLOSING),this._driver.close(t,e)},_configureStream:function(){var e=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(t){this._stream.on(t,function(){e._finalizeClose()})},this),this._stream.on("error",function(t){e._emitError("Network error: "+e.url+": "+t.message),e._finalizeClose()})},_open:function(){if(this.readyState===x.CONNECTING){this.readyState=x.OPEN,this.protocol=this._driver.protocol||"";var e=new fn("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},_receiveMessage:function(e){if(this.readyState>x.OPEN)return!1;this.readable&&this.emit("data",e);var t=new fn("message",{data:e});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(e){if(!(this.readyState>=x.CLOSING)){var t=new fn("error",{message:e});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(e,t){this.readyState!==x.CLOSED&&(this.readyState=x.CLOSING,this._closeParams=[e,t],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==x.CLOSED){this.readyState=x.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var e=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006,i=new fn("close",{code:t,reason:e});i.initEvent("close",!1,!1),this.dispatchEvent(i)}}};for(us in sh)x.prototype[us]=sh[us];var us;for(fs in oh)x.prototype[fs]=oh[fs];var fs;ah.exports=x});var fh=f((zE,uh)=>{"use strict";var Cm=m("util"),wm=m("net"),ch=m("tls"),lh=m("url"),Sm=Pi(),hh=pn(),WE=Ni(),Om={"http:":80,"https:":443,"ws:":80,"wss:":443},dh=["https:","wss:"],mn=function(e,t,i){i=i||{},this.url=e,this._driver=Sm.client(this.url,{maxLength:i.maxLength,protocols:t}),["open","error"].forEach(function(_){this._driver.on(_,function(){h.headers=h._driver.headers,h.statusCode=h._driver.statusCode})},this);var r=i.proxy||{},n=lh.parse(r.origin||this.url),o=n.port||Om[n.protocol],s=dh.indexOf(n.protocol)>=0,a=function(){h._onConnect()},c=i.net||{},l=i.tls||{},d=r.origin?r.tls||{}:l,h=this;c.host=d.host=n.hostname,c.port=d.port=o,l.ca=l.ca||i.ca,d.servername=d.servername||n.hostname,this._stream=s?ch.connect(d,a):wm.connect(c,a),r.origin&&this._configureProxy(r,l),hh.call(this,i)};Cm.inherits(mn,hh);mn.prototype._onConnect=function(){var e=this._proxy||this._driver;e.start()};mn.prototype._configureProxy=function(e,t){var i=lh.parse(this.url),r=dh.indexOf(i.protocol)>=0,n=this,o;if(this._proxy=this._driver.proxy(e.origin),e.headers)for(o in e.headers)this._proxy.setHeader(o,e.headers[o]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(r){var s={socket:n._stream,servername:i.hostname};for(o in t)s[o]=t[o];n._stream=ch.connect(s),n._configureStream()}n._driver.io.pipe(n._stream),n._stream.pipe(n._driver.io),n._driver.start()}),this._proxy.on("error",function(s){n._driver.emit("error",s)})};uh.exports=mn});var vh=f((GE,gh)=>{"use strict";var xm=m("stream").Stream,km=m("util"),Rm=Pi(),Dm=en(),Zt=pn(),ph=ds(),mh=Ni(),Mi=function(e,t,i){this.writable=!0,i=i||{},this._stream=t.socket,this._ping=i.ping||this.DEFAULT_PING,this._retry=i.retry||this.DEFAULT_RETRY;var r=Rm.isSecureRequest(e)?"https:":"http:";this.url=r+"//"+e.headers.host+e.url,this.lastEventId=e.headers["last-event-id"]||"",this.readyState=Zt.CONNECTING;var n=new Dm,o=this;if(i.headers)for(var s in i.headers)n.set(s,i.headers[s]);if(!(!this._stream||!this._stream.writable)){process.nextTick(function(){o._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var a=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+n.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(a),this._stream.on("drain",function(){o.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){o.ping()},this._ping*1e3)),["error","end"].forEach(function(c){o._stream.on(c,function(){o.close()})})}};km.inherits(Mi,xm);Mi.isEventSource=function(e){if(e.method!=="GET")return!1;var t=(e.headers.accept||"").split(/\s*,\s*/);return t.indexOf("text/event-stream")>=0};var _h={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(e){if(!this.writable)return!1;try{return this._stream.write(e,"utf8")}catch{return!1}},_open:function(){if(this.readyState===Zt.CONNECTING){this.readyState=Zt.OPEN;var e=new mh("open");e.initEvent("open",!1,!1),this.dispatchEvent(e)}},write:function(e){return this.send(e)},end:function(e){e!==void 0&&this.write(e),this.close()},send:function(e,t){if(this.readyState>Zt.OPEN)return!1;e=String(e).replace(/(\r\n|\r|\n)/g,"$1data: "),t=t||{};var i="";return t.event&&(i+="event: "+t.event+`\r
`),t.id&&(i+="id: "+t.id+`\r
`),i+="data: "+e+`\r
\r
`,this._write(i)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>Zt.OPEN)return!1;this.readyState=Zt.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var e=new mh("close");return e.initEvent("close",!1,!1),this.dispatchEvent(e),!0}};for(ps in _h)Mi.prototype[ps]=_h[ps];var ps;for(ms in ph)Mi.prototype[ms]=ph[ms];var ms;gh.exports=Mi});var Eh=f((YE,bh)=>{"use strict";var Tm=m("util"),_s=Pi(),yh=pn(),$e=function(e,t,i,r,n){n=n||{},this._stream=t,this._driver=_s.http(e,{maxLength:n.maxLength,protocols:r});var o=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var s=function(){o._stream.removeListener("data",s)};this._stream.on("data",s),yh.call(this,n),process.nextTick(function(){o._driver.start(),o._driver.io.write(i)})}};Tm.inherits($e,yh);$e.isWebSocket=function(e){return _s.isWebSocket(e)};$e.validateOptions=function(e,t){_s.validateOptions(e,t)};$e.WebSocket=$e;$e.Client=fh();$e.EventSource=vh();bh.exports=$e});var wh=f((XE,Ch)=>{"use strict";Ch.exports=Eh().Client});var Rh=f(($E,kh)=>{"use strict";var Sh=Ge(),Am=le(),Im=b(),Oh=m("events").EventEmitter,xh=wh(),Ce=function(){};process.env.NODE_ENV!=="production"&&(Ce=D()("sockjs-client:websocket"));function Me(e,t,i){if(!Me.enabled())throw new Error("Transport created when disabled");Oh.call(this),Ce("constructor",e);var r=this,n=Am.addPath(e,"/websocket");n.slice(0,5)==="https"?n="wss"+n.slice(5):n="ws"+n.slice(4),this.url=n,this.ws=new xh(this.url,[],i),this.ws.onmessage=function(o){Ce("message event",o.data),r.emit("message",o.data)},this.unloadRef=Sh.unloadAdd(function(){Ce("unload"),r.ws.close()}),this.ws.onclose=function(o){Ce("close event",o.code,o.reason),r.emit("close",o.code,o.reason),r._cleanup()},this.ws.onerror=function(o){Ce("error event",o),r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}Im(Me,Oh);Me.prototype.send=function(e){var t="["+e+"]";Ce("send",t),this.ws.send(t)};Me.prototype.close=function(){Ce("close");var e=this.ws;this._cleanup(),e&&e.close()};Me.prototype._cleanup=function(){Ce("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),Sh.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};Me.enabled=function(){return Ce("enabled"),!!xh};Me.transportName="websocket";Me.roundTrips=2;kh.exports=Me});var Ah=f((KE,Th)=>{"use strict";var Pm=b(),Dh=m("events").EventEmitter,we=function(){};process.env.NODE_ENV!=="production"&&(we=D()("sockjs-client:buffered-sender"));function vt(e,t){we(e),Dh.call(this),this.sendBuffer=[],this.sender=t,this.url=e}Pm(vt,Dh);vt.prototype.send=function(e){we("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};vt.prototype.sendScheduleWait=function(){we("sendScheduleWait");var e=this,t;this.sendStop=function(){we("sendStop"),e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){we("timeout"),e.sendStop=null,e.sendSchedule()},25)};vt.prototype.sendSchedule=function(){we("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(i){e.sendStop=null,i?(we("error",i),e.emit("close",i.code||1006,"Sending error: "+i),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};vt.prototype._cleanup=function(){we("_cleanup"),this.removeAllListeners()};vt.prototype.close=function(){we("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};Th.exports=vt});var Nh=f((ZE,Ph)=>{"use strict";var Nm=b(),Ih=m("events").EventEmitter,Qt=function(){};process.env.NODE_ENV!=="production"&&(Qt=D()("sockjs-client:polling"));function _n(e,t,i){Qt(t),Ih.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=i,this._scheduleReceiver()}Nm(_n,Ih);_n.prototype._scheduleReceiver=function(){Qt("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(i){Qt("message",i),e.emit("message",i)}),t.once("close",function(i,r){Qt("close",i,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(r==="network"?e._scheduleReceiver():(e.emit("close",i||1006,r),e.removeAllListeners()))})};_n.prototype.abort=function(){Qt("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};Ph.exports=_n});var ys=f((QE,Mh)=>{"use strict";var Mm=b(),Fm=le(),gs=Ah(),Lm=Nh(),Fi=function(){};process.env.NODE_ENV!=="production"&&(Fi=D()("sockjs-client:sender-receiver"));function vs(e,t,i,r,n){var o=Fm.addPath(e,t);Fi(o);var s=this;gs.call(this,e,i),this.poll=new Lm(r,o,n),this.poll.on("message",function(a){Fi("poll message",a),s.emit("message",a)}),this.poll.once("close",function(a,c){Fi("poll close",a,c),s.poll=null,s.emit("close",a,c),s.close()})}Mm(vs,gs);vs.prototype.close=function(){gs.prototype.close.call(this),Fi("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};Mh.exports=vs});var yt=f((JE,Bh)=>{"use strict";var Bm=b(),jm=le(),Fh=ys(),gn=function(){};process.env.NODE_ENV!=="production"&&(gn=D()("sockjs-client:ajax-based"));function Hm(e){return function(t,i,r){gn("create ajax sender",t,i);var n={};typeof i=="string"&&(n.headers={"Content-type":"text/plain"});var o=jm.addPath(t,"/xhr_send"),s=new e("POST",o,i,n);return s.once("finish",function(a){if(gn("finish",a),s=null,a!==200&&a!==204)return r(new Error("http status "+a));r()}),function(){gn("abort"),s.close(),s=null;var a=new Error("Aborted");a.code=1e3,r(a)}}}function Lh(e,t,i,r){Fh.call(this,e,t,Hm(r),i,r)}Bm(Lh,Fh);Bh.exports=Lh});var Bi=f((eC,Hh)=>{"use strict";var qm=b(),jh=m("events").EventEmitter,Fe=function(){};process.env.NODE_ENV!=="production"&&(Fe=D()("sockjs-client:receiver:xhr"));function Li(e,t){Fe(e),jh.call(this);var i=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,n){Fe("finish",r,n),i._chunkHandler(r,n),i.xo=null;var o=r===200?"network":"permanent";Fe("close",o),i.emit("close",null,o),i._cleanup()})}qm(Li,jh);Li.prototype._chunkHandler=function(e,t){if(Fe("_chunkHandler",e),!(e!==200||!t))for(var i=-1;;this.bufferPosition+=i+1){var r=t.slice(this.bufferPosition);if(i=r.indexOf(`
`),i===-1)break;var n=r.slice(0,i);n&&(Fe("message",n),this.emit("message",n))}};Li.prototype._cleanup=function(){Fe("_cleanup"),this.removeAllListeners()};Li.prototype.abort=function(){Fe("abort"),this.xo&&(this.xo.close(),Fe("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};Hh.exports=Li});var bs=f((tC,Vh)=>{"use strict";var qh=m("events").EventEmitter,Vm=b(),Um=m("http"),Wm=m("https"),zm=Gr(),Jt=function(){};process.env.NODE_ENV!=="production"&&(Jt=D()("sockjs-client:driver:xhr"));function ji(e,t,i,r){Jt(e,t,i);var n=this;qh.call(this);var o=new zm(t),s={method:e,hostname:o.hostname.replace(/\[|\]/g,""),port:o.port,path:o.pathname+(o.query||""),headers:r&&r.headers},a=o.protocol==="https:"?Wm:Um;this.req=a.request(s,function(c){c.setEncoding("utf8");var l="";c.on("data",function(d){Jt("data",d),l+=d,n.emit("chunk",200,l)}),c.once("end",function(){Jt("end"),n.emit("finish",c.statusCode,l),n.req=null})}),this.req.on("error",function(c){Jt("error",c),n.emit("finish",0,c.message)}),i&&this.req.write(i),this.req.end()}Vm(ji,qh);ji.prototype.close=function(){Jt("close"),this.removeAllListeners(),this.req&&(this.req.abort(),this.req=null)};ji.enabled=!0;ji.supportsCORS=!0;Vh.exports=ji});var Hi=f((iC,Uh)=>{"use strict";var Gm=b(),vn=bs();function Es(e,t,i,r){vn.call(this,e,t,i,r)}Gm(Es,vn);Es.enabled=vn.enabled&&vn.supportsCORS;Uh.exports=Es});var ei=f((rC,Wh)=>{"use strict";var Ym=b(),Cs=bs();function ws(e,t,i){Cs.call(this,e,t,i,{noCredentials:!0})}Ym(ws,Cs);ws.enabled=Cs.enabled;Wh.exports=ws});var ti=f((nC,zh)=>{"use strict";zh.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}});var Xh=f((oC,Yh)=>{"use strict";var Xm=b(),Gh=yt(),$m=Bi(),Ss=Hi(),Km=ei(),Zm=ti();function ii(e){if(!Km.enabled&&!Ss.enabled)throw new Error("Transport created when disabled");Gh.call(this,e,"/xhr_streaming",$m,Ss)}Xm(ii,Gh);ii.enabled=function(e){return e.nullOrigin||Zm.isOpera()?!1:Ss.enabled};ii.transportName="xhr-streaming";ii.roundTrips=2;ii.needBody=!!global.document;Yh.exports=ii});var yn=f((sC,Zh)=>{"use strict";var $h=m("events").EventEmitter,Qm=b(),Kh=Ge(),Jm=ti(),e_=le(),Le=function(){};process.env.NODE_ENV!=="production"&&(Le=D()("sockjs-client:sender:xdr"));function bt(e,t,i){Le(e,t);var r=this;$h.call(this),setTimeout(function(){r._start(e,t,i)},0)}Qm(bt,$h);bt.prototype._start=function(e,t,i){Le("_start");var r=this,n=new global.XDomainRequest;t=e_.addQuery(t,"t="+ +new Date),n.onerror=function(){Le("onerror"),r._error()},n.ontimeout=function(){Le("ontimeout"),r._error()},n.onprogress=function(){Le("progress",n.responseText),r.emit("chunk",200,n.responseText)},n.onload=function(){Le("load"),r.emit("finish",200,n.responseText),r._cleanup(!1)},this.xdr=n,this.unloadRef=Kh.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(i)}catch{this._error()}};bt.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};bt.prototype._cleanup=function(e){if(Le("cleanup",e),!!this.xdr){if(this.removeAllListeners(),Kh.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};bt.prototype.close=function(){Le("close"),this._cleanup(!0)};bt.enabled=!!(global.XDomainRequest&&Jm.hasDomain());Zh.exports=bt});var xs=f((aC,Jh)=>{"use strict";var t_=b(),Qh=yt(),i_=Bi(),Os=yn();function qi(e){if(!Os.enabled)throw new Error("Transport created when disabled");Qh.call(this,e,"/xhr_streaming",i_,Os)}t_(qi,Qh);qi.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:Os.enabled&&e.sameScheme};qi.transportName="xdr-streaming";qi.roundTrips=2;Jh.exports=qi});var ks=f((cC,nd)=>{"use strict";var ed=m("url").parse,r_=m("events"),n_=m("https"),o_=m("http"),s_=m("util"),a_=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],rd=[239,187,191],c_=58,l_=32,td=10,h_=13,id=1024*256,d_=/^(cookie|authorization)$/i;function u_(e){return rd.every(function(t,i){return e[i]===t})}function T(e,t){var i=T.CONNECTING,r=t&&t.headers,n=!1;Object.defineProperty(this,"readyState",{get:function(){return i}}),Object.defineProperty(this,"url",{get:function(){return e}});var o=this;o.reconnectInterval=1e3,o.connectionInProgress=!1;function s(E){i!==T.CLOSED&&(i=T.CONNECTING,w("error",new Vi("error",{message:E})),_&&(e=_,_=null,n=!1),setTimeout(function(){i!==T.CONNECTING||o.connectionInProgress||(o.connectionInProgress=!0,g())},o.reconnectInterval))}var a,c="";r&&r["Last-Event-ID"]&&(c=r["Last-Event-ID"],delete r["Last-Event-ID"]);var l=!1,d="",h="",_=null;function g(){var E=ed(e),re=E.protocol==="https:";if(E.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},c&&(E.headers["Last-Event-ID"]=c),r){var K=n?p_(r):r;for(var ke in K){var me=K[ke];me&&(E.headers[ke]=me)}}E.rejectUnauthorized=!(t&&!t.rejectUnauthorized),t&&t.createConnection!==void 0&&(E.createConnection=t.createConnection);var xt=t&&t.proxy;if(xt){var Q=ed(t.proxy);re=Q.protocol==="https:",E.protocol=re?"https:":"http:",E.path=e,E.headers.Host=E.host,E.hostname=Q.hostname,E.host=Q.host,E.port=Q.port}if(t&&t.https){for(var _e in t.https)if(a_.indexOf(_e)!==-1){var ir=t.https[_e];ir!==void 0&&(E[_e]=ir)}}t&&t.withCredentials!==void 0&&(E.withCredentials=t.withCredentials),a=(re?n_:o_).request(E,function(C){if(o.connectionInProgress=!1,C.statusCode===500||C.statusCode===502||C.statusCode===503||C.statusCode===504){w("error",new Vi("error",{status:C.statusCode,message:C.statusMessage})),s();return}if(C.statusCode===301||C.statusCode===302||C.statusCode===307){var kt=C.headers.location;if(!kt){w("error",new Vi("error",{status:C.statusCode,message:C.statusMessage}));return}var $u=new URL(e).origin,Ku=new URL(kt).origin;n=$u!==Ku,C.statusCode===307&&(_=e),e=kt,process.nextTick(g);return}if(C.statusCode!==200)return w("error",new Vi("error",{status:C.statusCode,message:C.statusMessage})),o.close();i=T.OPEN,C.on("close",function(){C.removeAllListeners("close"),C.removeAllListeners("end"),s()}),C.on("end",function(){C.removeAllListeners("close"),C.removeAllListeners("end"),s()}),w("open",new Vi("open"));var F,Nn,Mn=0,Fn=-1,rr=0,Re=0;C.on("data",function(Rt){F?(Rt.length>F.length-Re&&(rr=F.length*2+Rt.length,rr>id&&(rr=F.length+Rt.length+id),Nn=Buffer.alloc(rr),F.copy(Nn,0,0,Re),F=Nn),Rt.copy(F,Re),Re+=Rt.length):(F=Rt,u_(F)&&(F=F.slice(rd.length)),Re=F.length);for(var ne=0,nr=Re;ne<nr;){l&&(F[ne]===td&&++ne,l=!1);for(var Dt=-1,or=Fn,sr,Tt=Mn;Dt<0&&Tt<nr;++Tt)sr=F[Tt],sr===c_?or<0&&(or=Tt-ne):sr===h_?(l=!0,Dt=Tt-ne):sr===td&&(Dt=Tt-ne);if(Dt<0){Mn=nr-ne,Fn=or;break}else Mn=0,Fn=-1;k(F,ne,or,Dt),ne+=Dt+1}ne===nr?(F=void 0,Re=0):ne>0&&(F=F.slice(ne,Re),Re=F.length)})}),a.on("error",function(C){o.connectionInProgress=!1,s(C.message)}),a.setNoDelay&&a.setNoDelay(!0),a.end()}g();function w(){o.listeners(arguments[0]).length>0&&o.emit.apply(o,arguments)}this._close=function(){i!==T.CLOSED&&(i=T.CLOSED,a.abort&&a.abort(),a.xhr&&a.xhr.abort&&a.xhr.abort())};function k(E,re,K,ke){if(ke===0){if(d.length>0){var me=h||"message";w(me,new f_(me,{data:d.slice(0,-1),lastEventId:c,origin:new URL(e).origin})),d=""}h=void 0}else if(K>0){var xt=K<0,Q=0,_e=E.slice(re,re+(xt?ke:K)).toString();xt?Q=ke:E[re+K+1]!==l_?Q=K+1:Q=K+2,re+=Q;var ir=ke-Q,C=E.slice(re,re+ir).toString();if(_e==="data")d+=C+`
`;else if(_e==="event")h=C;else if(_e==="id")c=C;else if(_e==="retry"){var kt=parseInt(C,10);Number.isNaN(kt)||(o.reconnectInterval=kt)}}}}nd.exports=T;s_.inherits(T,r_.EventEmitter);T.prototype.constructor=T;["open","error","message"].forEach(function(e){Object.defineProperty(T.prototype,"on"+e,{get:function(){var i=this.listeners(e)[0];return i?i._listener?i._listener:i:void 0},set:function(i){this.removeAllListeners(e),this.addEventListener(e,i)}})});Object.defineProperty(T,"CONNECTING",{enumerable:!0,value:0});Object.defineProperty(T,"OPEN",{enumerable:!0,value:1});Object.defineProperty(T,"CLOSED",{enumerable:!0,value:2});T.prototype.CONNECTING=0;T.prototype.OPEN=1;T.prototype.CLOSED=2;T.prototype.close=function(){this._close()};T.prototype.addEventListener=function(t,i){typeof i=="function"&&(i._listener=i,this.on(t,i))};T.prototype.dispatchEvent=function(t){if(!t.type)throw new Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(t.type,t.detail)};T.prototype.removeEventListener=function(t,i){typeof i=="function"&&(i._listener=void 0,this.removeListener(t,i))};function Vi(e,t){if(Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)for(var i in t)t.hasOwnProperty(i)&&Object.defineProperty(this,i,{writable:!1,value:t[i],enumerable:!0})}function f_(e,t){Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0});for(var i in t)t.hasOwnProperty(i)&&Object.defineProperty(this,i,{writable:!1,value:t[i],enumerable:!0})}function p_(e){var t={};for(var i in e)d_.test(i)||(t[i]=e[i]);return t}});var ad=f((lC,sd)=>{"use strict";var m_=b(),od=m("events").EventEmitter,__=ks(),Et=function(){};process.env.NODE_ENV!=="production"&&(Et=D()("sockjs-client:receiver:eventsource"));function Ui(e){Et(e),od.call(this);var t=this,i=this.es=new __(e);i.onmessage=function(r){Et("message",r.data),t.emit("message",decodeURI(r.data))},i.onerror=function(r){Et("error",i.readyState,r);var n=i.readyState!==2?"network":"permanent";t._cleanup(),t._close(n)}}m_(Ui,od);Ui.prototype.abort=function(){Et("abort"),this._cleanup(),this._close("user")};Ui.prototype._cleanup=function(){Et("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};Ui.prototype._close=function(e){Et("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};sd.exports=Ui});var Rs=f((hC,ld)=>{"use strict";var g_=b(),cd=yt(),v_=ad(),y_=Hi(),b_=ks();function ri(e){if(!ri.enabled())throw new Error("Transport created when disabled");cd.call(this,e,"/eventsource",v_,y_)}g_(ri,cd);ri.enabled=function(){return!!b_};ri.transportName="eventsource";ri.roundTrips=2;ld.exports=ri});var Ds=f((dC,hd)=>{"use strict";hd.exports="1.6.1"});var ni=f((uC,Be)=>{"use strict";var bn=Ge(),E_=ti(),Ke=function(){};process.env.NODE_ENV!=="production"&&(Ke=D()("sockjs-client:utils:iframe"));Be.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){Be.exports.WPrefix in global||(global[Be.exports.WPrefix]={})},postMessage:function(e,t){global.parent!==global?global.parent.postMessage(JSON.stringify({windowId:Be.exports.currentWindowId,type:e,data:t||""}),"*"):Ke("Cannot postMessage, no parent window.",e,t)},createIframe:function(e,t){var i=global.document.createElement("iframe"),r,n,o=function(){Ke("unattach"),clearTimeout(r);try{i.onload=null}catch{}i.onerror=null},s=function(){Ke("cleanup"),i&&(o(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),bn.unloadDel(n))},a=function(l){Ke("onerror",l),i&&(s(),t(l))},c=function(l,d){Ke("post",l,d),setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(l,d)}catch{}},0)};return i.src=e,i.style.display="none",i.style.position="absolute",i.onerror=function(){a("onerror")},i.onload=function(){Ke("onload"),clearTimeout(r),r=setTimeout(function(){a("onload timeout")},2e3)},global.document.body.appendChild(i),r=setTimeout(function(){a("timeout")},15e3),n=bn.unloadAdd(s),{post:c,cleanup:s,loaded:o}},createHtmlfile:function(e,t){var i=["Active"].concat("Object").join("X"),r=new global[i]("htmlfile"),n,o,s,a=function(){clearTimeout(n),s.onerror=null},c=function(){r&&(a(),bn.unloadDel(o),s.parentNode.removeChild(s),s=r=null,CollectGarbage())},l=function(_){Ke("onerror",_),r&&(c(),t(_))},d=function(_,g){try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(_,g)},0)}catch{}};r.open(),r.write('<html><script>document.domain="'+global.document.domain+'";</script></html>'),r.close(),r.parentWindow[Be.exports.WPrefix]=global[Be.exports.WPrefix];var h=r.createElement("div");return r.body.appendChild(h),s=r.createElement("iframe"),h.appendChild(s),s.src=e,s.onerror=function(){l("onerror")},n=setTimeout(function(){l("timeout")},15e3),o=bn.unloadAdd(c),{post:d,cleanup:c,loaded:a}}};Be.exports.iframeEnabled=!1;global.document&&(Be.exports.iframeEnabled=(typeof global.postMessage=="function"||typeof global.postMessage=="object")&&!E_.isKonqueror())});var As=f((fC,pd)=>{"use strict";var C_=b(),dd=m("events").EventEmitter,w_=Ds(),Ts=le(),ud=ni(),fd=Ge(),S_=ct(),fe=function(){};process.env.NODE_ENV!=="production"&&(fe=D()("sockjs-client:transport:iframe"));function Se(e,t,i){if(!Se.enabled())throw new Error("Transport created when disabled");dd.call(this);var r=this;this.origin=Ts.getOrigin(i),this.baseUrl=i,this.transUrl=t,this.transport=e,this.windowId=S_.string(8);var n=Ts.addPath(i,"/iframe.html")+"#"+this.windowId;fe(e,t,n),this.iframeObj=ud.createIframe(n,function(o){fe("err callback"),r.emit("close",1006,"Unable to load an iframe ("+o+")"),r.close()}),this.onmessageCallback=this._message.bind(this),fd.attachEvent("message",this.onmessageCallback)}C_(Se,dd);Se.prototype.close=function(){if(fe("close"),this.removeAllListeners(),this.iframeObj){fd.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};Se.prototype._message=function(e){if(fe("message",e.data),!Ts.isOriginEqual(e.origin,this.origin)){fe("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{fe("bad json",e.data);return}if(t.windowId!==this.windowId){fe("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([w_,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var i;try{i=JSON.parse(t.data)}catch{fe("bad json",t.data);return}this.emit("close",i[0],i[1]),this.close();break}};Se.prototype.postMessage=function(e,t){fe("postMessage",e,t),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};Se.prototype.send=function(e){fe("send",e),this.postMessage("m",e)};Se.enabled=function(){return ud.iframeEnabled};Se.transportName="iframe";Se.roundTrips=2;pd.exports=Se});var En=f((pC,md)=>{"use strict";md.exports={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,i,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}});var wn=f((mC,_d)=>{"use strict";var O_=b(),Cn=As(),x_=En();_d.exports=function(e){function t(i,r){Cn.call(this,e.transportName,i,r)}return O_(t,Cn),t.enabled=function(i,r){if(!global.document)return!1;var n=x_.extend({},r);return n.sameOrigin=!0,e.enabled(n)&&Cn.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=Cn.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}});var bd=f((_C,yd)=>{"use strict";var k_=b(),Ct=ni(),R_=le(),vd=m("events").EventEmitter,D_=ct(),Oe=function(){};process.env.NODE_ENV!=="production"&&(Oe=D()("sockjs-client:receiver:htmlfile"));function pe(e){Oe(e),vd.call(this);var t=this;Ct.polluteGlobalNamespace(),this.id="a"+D_.string(6),e=R_.addQuery(e,"c="+decodeURIComponent(Ct.WPrefix+"."+this.id)),Oe("using htmlfile",pe.htmlfileEnabled);var i=pe.htmlfileEnabled?Ct.createHtmlfile:Ct.createIframe;global[Ct.WPrefix][this.id]={start:function(){Oe("start"),t.iframeObj.loaded()},message:function(r){Oe("message",r),t.emit("message",r)},stop:function(){Oe("stop"),t._cleanup(),t._close("network")}},this.iframeObj=i(e,function(){Oe("callback"),t._cleanup(),t._close("permanent")})}k_(pe,vd);pe.prototype.abort=function(){Oe("abort"),this._cleanup(),this._close("user")};pe.prototype._cleanup=function(){Oe("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[Ct.WPrefix][this.id]};pe.prototype._close=function(e){Oe("_close",e),this.emit("close",null,e),this.removeAllListeners()};pe.htmlfileEnabled=!1;var gd=["Active"].concat("Object").join("X");if(gd in global)try{pe.htmlfileEnabled=!!new global[gd]("htmlfile")}catch{}pe.enabled=pe.htmlfileEnabled||Ct.iframeEnabled;yd.exports=pe});var Ps=f((gC,Cd)=>{"use strict";var T_=b(),Is=bd(),A_=ei(),Ed=yt();function Wi(e){if(!Is.enabled)throw new Error("Transport created when disabled");Ed.call(this,e,"/htmlfile",Is,A_)}T_(Wi,Ed);Wi.enabled=function(e){return Is.enabled&&e.sameOrigin};Wi.transportName="htmlfile";Wi.roundTrips=2;Cd.exports=Wi});var Ms=f((vC,Od)=>{"use strict";var I_=b(),wd=yt(),P_=Bi(),Ns=Hi(),Sd=ei();function zi(e){if(!Sd.enabled&&!Ns.enabled)throw new Error("Transport created when disabled");wd.call(this,e,"/xhr",P_,Ns)}I_(zi,wd);zi.enabled=function(e){return e.nullOrigin?!1:Sd.enabled&&e.sameOrigin?!0:Ns.enabled};zi.transportName="xhr-polling";zi.roundTrips=2;Od.exports=zi});var Dd=f((yC,Rd)=>{"use strict";var N_=b(),kd=yt(),M_=xs(),F_=Bi(),xd=yn();function Gi(e){if(!xd.enabled)throw new Error("Transport created when disabled");kd.call(this,e,"/xhr",F_,xd)}N_(Gi,kd);Gi.enabled=M_.enabled;Gi.transportName="xdr-polling";Gi.roundTrips=2;Rd.exports=Gi});var Pd=f((bC,Id)=>{"use strict";var Yi=ni(),Td=ct(),L_=ti(),B_=le(),j_=b(),Ad=m("events").EventEmitter,he=function(){};process.env.NODE_ENV!=="production"&&(he=D()("sockjs-client:receiver:jsonp"));function de(e){he(e);var t=this;Ad.call(this),Yi.polluteGlobalNamespace(),this.id="a"+Td.string(6);var i=B_.addQuery(e,"c="+encodeURIComponent(Yi.WPrefix+"."+this.id));global[Yi.WPrefix][this.id]=this._callback.bind(this),this._createScript(i),this.timeoutId=setTimeout(function(){he("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},de.timeout)}j_(de,Ad);de.prototype.abort=function(){if(he("abort"),global[Yi.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};de.timeout=35e3;de.scriptErrorTimeout=1e3;de.prototype._callback=function(e){he("_callback",e),this._cleanup(),!this.aborting&&(e&&(he("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())};de.prototype._abort=function(e){he("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};de.prototype._cleanup=function(){if(he("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete global[Yi.WPrefix][this.id]};de.prototype._scriptError=function(){he("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},de.scriptErrorTimeout))};de.prototype._createScript=function(e){he("_createScript",e);var t=this,i=this.script=global.document.createElement("script"),r;if(i.id="a"+Td.string(8),i.src=e,i.type="text/javascript",i.charset="UTF-8",i.onerror=this._scriptError.bind(this),i.onload=function(){he("onload"),t._abort(new Error("JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(){if(he("onreadystatechange",i.readyState),/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){t.loadedOkay=!0;try{i.onclick()}catch{}}i&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof i.async>"u"&&global.document.attachEvent)if(L_.isOpera())r=this.script2=global.document.createElement("script"),r.text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=r.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch{}i.async=!0}typeof i.async<"u"&&(i.async=!0);var n=global.document.getElementsByTagName("head")[0];n.insertBefore(i,n.firstChild),r&&n.insertBefore(r,n.firstChild)};Id.exports=de});var Fd=f((EC,Md)=>{"use strict";var H_=ct(),Nd=le(),xe=function(){};process.env.NODE_ENV!=="production"&&(xe=D()("sockjs-client:sender:jsonp"));var ie,Xi;function q_(e){xe("createIframe",e);try{return global.document.createElement('<iframe name="'+e+'">')}catch{var t=global.document.createElement("iframe");return t.name=e,t}}function V_(){xe("createForm"),ie=global.document.createElement("form"),ie.style.display="none",ie.style.position="absolute",ie.method="POST",ie.enctype="application/x-www-form-urlencoded",ie.acceptCharset="UTF-8",Xi=global.document.createElement("textarea"),Xi.name="d",ie.appendChild(Xi),global.document.body.appendChild(ie)}Md.exports=function(e,t,i){xe(e,t),ie||V_();var r="a"+H_.string(8);ie.target=r,ie.action=Nd.addQuery(Nd.addPath(e,"/jsonp_send"),"i="+r);var n=q_(r);n.id=r,n.style.display="none",ie.appendChild(n);try{Xi.value=t}catch{}ie.submit();var o=function(s){xe("completed",r,s),n.onerror&&(n.onreadystatechange=n.onerror=n.onload=null,setTimeout(function(){xe("cleaning up",r),n.parentNode.removeChild(n),n=null},500),Xi.value="",i(s))};return n.onerror=function(){xe("onerror",r),o()},n.onload=function(){xe("onload",r),o()},n.onreadystatechange=function(s){xe("onreadystatechange",r,n.readyState,s),n.readyState==="complete"&&o()},function(){xe("aborted",r),o(new Error("Aborted"))}}});var jd=f((CC,Bd)=>{"use strict";var U_=b(),Ld=ys(),W_=Pd(),z_=Fd();function wt(e){if(!wt.enabled())throw new Error("Transport created when disabled");Ld.call(this,e,"/jsonp",z_,W_)}U_(wt,Ld);wt.enabled=function(){return!!global.document};wt.transportName="jsonp-polling";wt.roundTrips=1;wt.needBody=!0;Bd.exports=wt});var qd=f((wC,Hd)=>{"use strict";Hd.exports=[Rh(),Xh(),xs(),Rs(),wn()(Rs()),Ps(),wn()(Ps()),Ms(),Dd(),wn()(Ms()),jd()]});var Xd=f(()=>{"use strict";var $i=Array.prototype,js=Object.prototype,G_=Function.prototype,Ki=String.prototype,Fs=$i.slice,Hs=js.toString,Wd=function(e){return js.toString.call(e)==="[object Function]"},Y_=function(t){return Hs.call(t)==="[object Array]"},zd=function(t){return Hs.call(t)==="[object String]"},X_=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),Bs;X_?Bs=function(e,t,i,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:Bs=function(e,t,i,r){!r&&t in e||(e[t]=i)};var Zi=function(e,t,i){for(var r in t)js.hasOwnProperty.call(t,r)&&Bs(e,r,t[r],i)},Gd=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function $_(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function K_(e){return e>>>0}function Ls(){}Zi(G_,{bind:function(t){var i=this;if(!Wd(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var r=Fs.call(arguments,1),n=function(){if(this instanceof c){var l=i.apply(this,r.concat(Fs.call(arguments)));return Object(l)===l?l:this}else return i.apply(t,r.concat(Fs.call(arguments)))},o=Math.max(0,i.length-r.length),s=[],a=0;a<o;a++)s.push("$"+a);var c=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(n);return i.prototype&&(Ls.prototype=i.prototype,c.prototype=new Ls,Ls.prototype=null),c}});Zi(Array,{isArray:Y_});var Vd=Object("a"),Yd=Vd[0]!=="a"||!(0 in Vd),Z_=function(t){var i=!0,r=!0;return t&&(t.call("foo",function(n,o,s){typeof s!="object"&&(i=!1)}),t.call([1],function(){"use strict";r=typeof this=="string"},"x")),!!t&&i&&r};Zi($i,{forEach:function(t){var i=Gd(this),r=Yd&&zd(this)?this.split(""):i,n=arguments[1],o=-1,s=r.length>>>0;if(!Wd(t))throw new TypeError;for(;++o<s;)o in r&&t.call(n,r[o],o,i)}},!Z_($i.forEach));var Q_=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;Zi($i,{indexOf:function(t){var i=Yd&&zd(this)?this.split(""):Gd(this),r=i.length>>>0;if(!r)return-1;var n=0;for(arguments.length>1&&(n=$_(arguments[1])),n=n>=0?n:Math.max(0,r+n);n<r;n++)if(n in i&&i[n]===t)return n;return-1}},Q_);var Ud=Ki.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var e=/()??/.exec("")[1]===void 0;Ki.split=function(t,i){var r=this;if(t===void 0&&i===0)return[];if(Hs.call(t)!=="[object RegExp]")return Ud.call(this,t,i);var n=[],o=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),s=0,a,c,l,d;for(t=new RegExp(t.source,o+"g"),r+="",e||(a=new RegExp("^"+t.source+"$(?!\\s)",o)),i=i===void 0?-1>>>0:K_(i);(c=t.exec(r))&&(l=c.index+c[0].length,!(l>s&&(n.push(r.slice(s,c.index)),!e&&c.length>1&&c[0].replace(a,function(){for(var h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(c[h]=void 0)}),c.length>1&&c.index<r.length&&$i.push.apply(n,c.slice(1)),d=c[0].length,s=l,n.length>=i)));)t.lastIndex===c.index&&t.lastIndex++;return s===r.length?(d||!t.test(""))&&n.push(""):n.push(r.slice(s)),n.length>i?n.slice(0,i):n}})():"0".split(void 0,0).length&&(Ki.split=function(t,i){return t===void 0&&i===0?[]:Ud.call(this,t,i)});var J_=Ki.substr,eg="".substr&&"0b".substr(-1)!=="b";Zi(Ki,{substr:function(t,i){return J_.call(this,t<0&&(t=this.length+t)<0?0:t,i)}},eg)});var Kd=f((xC,$d)=>{"use strict";var Sn=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,qs,tg=function(e){var t,i={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(n){return i[n]="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,i};$d.exports={quote:function(e){var t=JSON.stringify(e);return Sn.lastIndex=0,Sn.test(t)?(qs||(qs=tg(Sn)),t.replace(Sn,function(i){return qs[i]})):t}}});var Qd=f((kC,Zd)=>{"use strict";var Qi=function(){};process.env.NODE_ENV!=="production"&&(Qi=D()("sockjs-client:utils:transport"));Zd.exports=function(e){return{filterToEnabled:function(t,i){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(n){if(n){if(n.transportName==="websocket"&&i.websocket===!1){Qi("disabled from server","websocket");return}if(t.length&&t.indexOf(n.transportName)===-1){Qi("not in whitelist",n.transportName);return}n.enabled(i)?(Qi("enabled",n.transportName),r.main.push(n),n.facadeTransport&&r.facade.push(n.facadeTransport)):Qi("disabled",n.transportName)}}),r}}}});var eu=f((RC,Jd)=>{"use strict";var Vs={};["log","debug","warn"].forEach(function(e){var t;try{t=global.console&&global.console[e]&&global.console[e].apply}catch{}Vs[e]=t?function(){return global.console[e].apply(global.console,arguments)}:e==="log"?function(){}:Vs.log});Jd.exports=Vs});var On=f((DC,tu)=>{"use strict";function St(e){this.type=e}St.prototype.initEvent=function(e,t,i){return this.type=e,this.bubbles=t,this.cancelable=i,this.timeStamp=+new Date,this};St.prototype.stopPropagation=function(){};St.prototype.preventDefault=function(){};St.CAPTURING_PHASE=1;St.AT_TARGET=2;St.BUBBLING_PHASE=3;tu.exports=St});var ru=f((TC,iu)=>{"use strict";function xn(){this._listeners={}}xn.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var i=this._listeners[e];i.indexOf(t)===-1&&(i=i.concat([t])),this._listeners[e]=i};xn.prototype.removeEventListener=function(e,t){var i=this._listeners[e];if(i){var r=i.indexOf(t);if(r!==-1){i.length>1?this._listeners[e]=i.slice(0,r).concat(i.slice(r+1)):delete this._listeners[e];return}}};xn.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,i=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,i),t in this._listeners)for(var r=this._listeners[t],n=0;n<r.length;n++)r[n].apply(this,i)};iu.exports=xn});var Us=f((AC,nu)=>{"use strict";nu.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}});var cu=f((IC,au)=>{"use strict";var ig=b(),ou=On();function su(){ou.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}ig(su,ou);au.exports=su});var uu=f((PC,du)=>{"use strict";var rg=b(),lu=On();function hu(e){lu.call(this),this.initEvent("message",!1,!1),this.data=e}rg(hu,lu);du.exports=hu});var mu=f((NC,pu)=>{"use strict";var fu=m("events").EventEmitter,ng=b();function Ji(){var e=this;fu.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},Ji.timeout)}ng(Ji,fu);Ji.prototype.close=function(){clearTimeout(this.to)};Ji.timeout=2e3;pu.exports=Ji});var zs=f((MC,vu)=>{"use strict";var _u=m("events").EventEmitter,og=b(),sg=En(),gu=function(){};process.env.NODE_ENV!=="production"&&(gu=D()("sockjs-client:info-ajax"));function Ws(e,t){_u.call(this);var i=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(n,o){var s,a;if(n===200){if(a=+new Date-r,o)try{s=JSON.parse(o)}catch{gu("bad json",o)}sg.isObject(s)||(s={})}i.emit("finish",s,a),i.removeAllListeners()})}og(Ws,_u);Ws.prototype.close=function(){this.removeAllListeners(),this.xo.close()};vu.exports=Ws});var Gs=f((FC,bu)=>{"use strict";var ag=b(),yu=m("events").EventEmitter,cg=ei(),lg=zs();function kn(e){var t=this;yu.call(this),this.ir=new lg(e,cg),this.ir.once("finish",function(i,r){t.ir=null,t.emit("message",JSON.stringify([i,r]))})}ag(kn,yu);kn.transportName="iframe-info-receiver";kn.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};bu.exports=kn});var Ou=f((LC,Su)=>{"use strict";var Eu=m("events").EventEmitter,hg=b(),dg=Ge(),Cu=As(),ug=Gs(),wu=function(){};process.env.NODE_ENV!=="production"&&(wu=D()("sockjs-client:info-iframe"));function Rn(e,t){var i=this;Eu.call(this);var r=function(){var n=i.ifr=new Cu(ug.transportName,t,e);n.once("message",function(o){if(o){var s;try{s=JSON.parse(o)}catch{wu("bad json",o),i.emit("finish"),i.close();return}var a=s[0],c=s[1];i.emit("finish",a,c)}i.close()}),n.once("close",function(){i.emit("finish"),i.close()})};global.document.body?r():dg.attachEvent("load",r)}hg(Rn,Eu);Rn.enabled=function(){return Cu.enabled()};Rn.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};Su.exports=Rn});var Au=f((BC,Tu)=>{"use strict";var Du=m("events").EventEmitter,fg=b(),pg=le(),xu=yn(),ku=Hi(),mg=ei(),_g=mu(),Ru=Ou(),Dn=zs(),Ot=function(){};process.env.NODE_ENV!=="production"&&(Ot=D()("sockjs-client:info-receiver"));function je(e,t){Ot(e);var i=this;Du.call(this),setTimeout(function(){i.doXhr(e,t)},0)}fg(je,Du);je._getReceiver=function(e,t,i){return i.sameOrigin?new Dn(t,mg):ku.enabled?new Dn(t,ku):xu.enabled&&i.sameScheme?new Dn(t,xu):Ru.enabled()?new Ru(e,t):new Dn(t,_g)};je.prototype.doXhr=function(e,t){var i=this,r=pg.addPath(e,"/info");Ot("doXhr",r),this.xo=je._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){Ot("timeout"),i._cleanup(!1),i.emit("finish")},je.timeout),this.xo.once("finish",function(n,o){Ot("finish",n,o),i._cleanup(!0),i.emit("finish",n,o)})};je.prototype._cleanup=function(e){Ot("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};je.prototype.close=function(){Ot("close"),this.removeAllListeners(),this._cleanup(!1)};je.timeout=8e3;Tu.exports=je});var Nu=f((jC,Pu)=>{"use strict";var Iu=ni();function er(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}er.prototype._transportClose=function(e,t){Iu.postMessage("c",JSON.stringify([e,t]))};er.prototype._transportMessage=function(e){Iu.postMessage("t",e)};er.prototype._send=function(e){this._transport.send(e)};er.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()};Pu.exports=er});var Bu=f((HC,Lu)=>{"use strict";var Mu=le(),gg=Ge(),vg=Nu(),Fu=Gs(),Ys=ni(),Tn=Us(),An=function(){};process.env.NODE_ENV!=="production"&&(An=D()("sockjs-client:iframe-bootstrap"));Lu.exports=function(e,t){var i={};t.forEach(function(n){n.facadeTransport&&(i[n.facadeTransport.transportName]=n.facadeTransport)}),i[Fu.transportName]=Fu;var r;e.bootstrap_iframe=function(){var n;Ys.currentWindowId=Tn.hash.slice(1);var o=function(s){if(s.source===parent&&(typeof r>"u"&&(r=s.origin),s.origin===r)){var a;try{a=JSON.parse(s.data)}catch{An("bad json",s.data);return}if(a.windowId===Ys.currentWindowId)switch(a.type){case"s":var c;try{c=JSON.parse(a.data)}catch{An("bad json",a.data);break}var l=c[0],d=c[1],h=c[2],_=c[3];if(An(l,d,h,_),l!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+l+'", the iframe: "'+e.version+'".');if(!Mu.isOriginEqual(h,Tn.href)||!Mu.isOriginEqual(_,Tn.href))throw new Error("Can't connect to different domain from within an iframe. ("+Tn.href+", "+h+", "+_+")");n=new vg(new i[d](h,_));break;case"m":n._send(a.data);break;case"c":n&&n._close(),n=null;break}}};gg.attachEvent("message",o),Ys.postMessage("s")}}});var zu=f((qC,Wu)=>{"use strict";Xd();var yg=Gr(),bg=b(),ju=ct(),Eg=Kd(),tr=le(),Cg=Ge(),wg=Qd(),Sg=En(),Og=ti(),xg=eu(),Xs=On(),qu=ru(),In=Us(),kg=cu(),Hu=uu(),Rg=Au(),P=function(){};process.env.NODE_ENV!=="production"&&(P=D()("sockjs-client:main"));var Vu;function y(e,t,i){if(!(this instanceof y))return new y(e,t,i);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");qu.call(this),this.readyState=y.CONNECTING,this.extensions="",this.protocol="",i=i||{},i.protocols_whitelist&&xg.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=i.transports,this._transportOptions=i.transportOptions||{},this._timeout=i.timeout||0;var r=i.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return ju.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=i.server||ju.numberString(1e3);var n=new yg(e);if(!n.host||!n.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(n.hash)throw new SyntaxError("The URL must not contain a fragment");if(n.protocol!=="http:"&&n.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.");var o=n.protocol==="https:";if(In.protocol==="https:"&&!o&&!tr.isLoopbackAddr(n.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var s=t.sort();s.forEach(function(c,l){if(!c)throw new SyntaxError("The protocols entry '"+c+"' is invalid.");if(l<s.length-1&&c===s[l+1])throw new SyntaxError("The protocols entry '"+c+"' is duplicated.")});var a=tr.getOrigin(In.href);this._origin=a?a.toLowerCase():null,n.set("pathname",n.pathname.replace(/\/+$/,"")),this.url=n.href,P("using url",this.url),this._urlInfo={nullOrigin:!Og.hasDomain(),sameOrigin:tr.isOriginEqual(this.url,In.href),sameScheme:tr.isSchemeEqual(this.url,In.href)},this._ir=new Rg(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}bg(y,qu);function Uu(e){return e===1e3||e>=3e3&&e<=4999}y.prototype.close=function(e,t){if(e&&!Uu(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===y.CLOSING||this.readyState===y.CLOSED)){var i=!0;this._close(e||1e3,t||"Normal closure",i)}};y.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===y.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===y.OPEN&&this._transport.send(Eg.quote(e))};y.version=Ds();y.CONNECTING=0;y.OPEN=1;y.CLOSING=2;y.CLOSED=3;y.prototype._receiveInfo=function(e,t){if(P("_receiveInfo",t),this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=Sg.extend(e,this._urlInfo),P("info",e);var i=Vu.filterToEnabled(this._transportsWhitelist,e);this._transports=i.main,P(this._transports.length+" enabled transports"),this._connect()};y.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(P("attempt",e.transportName),e.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive")){P("waiting for body"),this._transports.unshift(e),Cg.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),P("using timeout",t);var i=tr.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[e.transportName];P("transport url",i);var n=new e(i,this._transUrl,r);n.on("message",this._transportMessage.bind(this)),n.once("close",this._transportClose.bind(this)),n.transportName=e.transportName,this._transport=n;return}this._close(2e3,"All transports failed",!1)};y.prototype._transportTimeout=function(){P("_transportTimeout"),this.readyState===y.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};y.prototype._transportMessage=function(e){P("_transportMessage",e);var t=this,i=e.slice(0,1),r=e.slice(1),n;switch(i){case"o":this._open();return;case"h":this.dispatchEvent(new Xs("heartbeat")),P("heartbeat",this.transport);return}if(r)try{n=JSON.parse(r)}catch{P("bad json",r)}if(typeof n>"u"){P("empty payload",r);return}switch(i){case"a":Array.isArray(n)&&n.forEach(function(o){P("message",t.transport,o),t.dispatchEvent(new Hu(o))});break;case"m":P("message",this.transport,n),this.dispatchEvent(new Hu(n));break;case"c":Array.isArray(n)&&n.length===2&&this._close(n[0],n[1],!0);break}};y.prototype._transportClose=function(e,t){if(P("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Uu(e)&&e!==2e3&&this.readyState===y.CONNECTING){this._connect();return}this._close(e,t)};y.prototype._open=function(){P("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===y.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=y.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new Xs("open")),P("connected",this.transport)):this._close(1006,"Server lost session")};y.prototype._close=function(e,t,i){P("_close",this.transport,e,t,i,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===y.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=y.CLOSING,setTimeout((function(){this.readyState=y.CLOSED,r&&this.dispatchEvent(new Xs("error"));var n=new kg("close");n.wasClean=i||!1,n.code=e||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null,P("disconnected")}).bind(this),0)};y.prototype.countRTO=function(e){return e>100?4*e:300+e};Wu.exports=function(e){return Vu=wg(e),Bu()(y,e),y}});var Yu=f((VC,Gu)=>{"use strict";var Dg=qd();Gu.exports=zu()(Dg);"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)});var di=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Nt=class extends di{component;viewContainerRef;injector;projectableNodes;constructor(t,i,r,n){super(),this.component=t,this.viewContainerRef=i,this.injector=r,this.projectableNodes=n}},Mt=class extends di{templateRef;viewContainerRef;context;injector;constructor(t,i,r,n){super(),this.templateRef=t,this.viewContainerRef=i,this.context=r,this.injector=n}get origin(){return this.templateRef.elementRef}attach(t,i=this.context){return this.context=i,super.attach(t)}detach(){return this.context=void 0,super.detach()}},ro=class extends di{element;constructor(t){super(),this.element=t instanceof oe?t.nativeElement:t}},Ft=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Nt)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Mt)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof ro)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},br=class extends Ft{outletElement;_appRef;_defaultInjector;constructor(t,i,r){super(),this.outletElement=t,this._appRef=i,this._defaultInjector=r}attachComponentPortal(t){let i;if(t.viewContainerRef){let r=t.injector||t.viewContainerRef.injector,n=r.get(Vn,null,{optional:!0})||void 0;i=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:r,ngModuleRef:n,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>i.destroy())}else{let r=this._appRef,n=t.injector||this._defaultInjector||R.NULL,o=n.get(At,r.injector);i=yr(t.component,{elementInjector:n,environmentInjector:o,projectableNodes:t.projectableNodes||void 0}),r.attachView(i.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(i.hostView),i.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let i=t.viewContainerRef,r=i.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(n=>this.outletElement.appendChild(n)),r.detectChanges(),this.setDisposeFn(()=>{let n=i.indexOf(r);n!==-1&&i.remove(n)}),this._attachedPortal=t,r}attachDomPortal=t=>{let i=t.element;i.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");i.parentNode.insertBefore(r,i),this.outletElement.appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var ui=(()=>{class e extends Ft{_moduleRef=u(Vn,{optional:!0});_document=u(M);_viewContainerRef=u(mr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}attached=new ge;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,n=r.createComponent(i.component,{index:r.length,injector:i.injector||r.injector,projectableNodes:i.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=i,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=i=>{let r=i.element;r.parentNode;let n=this._document.createComment("dom-portal");i.setAttachedHost(this),r.parentNode.insertBefore(n,r),this._getRootNode().appendChild(r),this._attachedPortal=i,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(r,n)})};_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ae({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Je]})}return e})();var tt=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({})}return e})();function va(e){return e.buttons===0||e.detail===0}function ya(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var no;function Qu(){if(no==null){let e=typeof document<"u"?document.head:null;no=!!(e&&(e.createShadowRoot||e.attachShadow))}return no}function ba(e){if(Qu()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Er(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let t=e.shadowRoot.activeElement;if(t===e)break;e=t}return e}function Pe(e){return e.composedPath?e.composedPath()[0]:e.target}var oo;try{oo=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oo=!1}var z=(()=>{class e{_platformId=u(Pt);isBrowser=this._platformId?Ie(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||oo)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fi;function Ju(){if(fi==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fi=!0}))}finally{fi=fi||!1}return fi}function Ea(e){return Ju()?e:!!e.capture}function pi(e,t=0){return Ca(e)?Number(e):arguments.length===2?t:0}function Ca(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function it(e){return e instanceof oe?e.nativeElement:e}var ef=new N("cdk-input-modality-detector-options"),tf={ignoreKeys:[18,17,224,91,16]},wa=650,so={passive:!0,capture:!0},rf=(()=>{class e{_platform=u(z);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new hr(null);_options;_lastTouchMs=0;_onKeydown=i=>{this._options?.ignoreKeys?.some(r=>r===i.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Pe(i))};_onMousedown=i=>{Date.now()-this._lastTouchMs<wa||(this._modality.next(va(i)?"keyboard":"mouse"),this._mostRecentTarget=Pe(i))};_onTouchstart=i=>{if(ya(i)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Pe(i)};constructor(){let i=u(q),r=u(M),n=u(ef,{optional:!0});if(this._options=G(G({},tf),n),this.modalityDetected=this._modality.pipe(fr(1)),this.modalityChanged=this.modalityDetected.pipe(jn()),this._platform.isBrowser){let o=u(Te).createRenderer(null,null);this._listenerCleanups=i.runOutsideAngular(()=>[o.listen(r,"keydown",this._onKeydown,so),o.listen(r,"mousedown",this._onMousedown,so),o.listen(r,"touchstart",this._onTouchstart,so)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(i=>i())}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),wr=(function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e})(wr||{}),nf=new N("cdk-focus-monitor-default-options"),Cr=Ea({passive:!0,capture:!0}),Sa=(()=>{class e{_ngZone=u(q);_platform=u(z);_inputModalityDetector=u(rf);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=u(M);_stopInputModalityDetector=new O;constructor(){let i=u(nf,{optional:!0});this._detectionMode=i?.detectionMode||wr.IMMEDIATE}_rootNodeFocusAndBlurListener=i=>{let r=Pe(i);for(let n=r;n;n=n.parentElement)i.type==="focus"?this._onFocus(i,n):this._onBlur(i,n)};monitor(i,r=!1){let n=it(i);if(!this._platform.isBrowser||n.nodeType!==1)return dr();let o=ba(n)||this._document,s=this._elementInfo.get(n);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new O,rootNode:o};return this._elementInfo.set(n,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(i){let r=it(i),n=this._elementInfo.get(r);n&&(n.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(n))}focusVia(i,r,n){let o=it(i),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(n))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===wr.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===wr.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?wa:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(i,r){let n=this._elementInfo.get(r),o=Pe(i);!n||!n.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),n)}_onBlur(i,r){let n=this._elementInfo.get(r);!n||n.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(n,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,n=this._rootNodeFocusListenerCount.get(r)||0;n||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Cr),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Cr)}),this._rootNodeFocusListenerCount.set(r,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(oi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let n=this._rootNodeFocusListenerCount.get(r);n>1?this._rootNodeFocusListenerCount.set(r,n-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Cr),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Cr),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,n){this._setClasses(i,r),this._emitOrigin(n,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((n,o)=>{(o===i||n.checkChildren&&o.contains(i))&&r.push([o,n])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Sr=new WeakMap,mi=(()=>{class e{_appRef;_injector=u(R);_environmentInjector=u(At);load(i){let r=this._appRef=this._appRef||this._injector.get(li),n=Sr.get(r);n||(n={loaders:new Set,refs:[]},Sr.set(r,n),r.onDestroy(()=>{Sr.get(r)?.refs.forEach(o=>o.destroy()),Sr.delete(r)})),n.loaders.has(i)||(n.loaders.add(i),n.refs.push(yr(i,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Oa=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,n){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return e})();function Lt(e){return Array.isArray(e)?e:[e]}var xa=new Set,rt,Or=(()=>{class e{_platform=u(z);_nonce=u(ra,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):sf}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&of(i,this._nonce),this._matchMedia(i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function of(e,t){if(!xa.has(e))try{rt||(rt=document.createElement("style"),t&&rt.setAttribute("nonce",t),rt.setAttribute("type","text/css"),document.head.appendChild(rt)),rt.sheet&&(rt.sheet.insertRule(`@media ${e} {body{ }}`,0),xa.add(e))}catch(i){console.error(i)}}function sf(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var ao=(()=>{class e{_mediaMatcher=u(Or);_zone=u(q);_queries=new Map;_destroySubject=new O;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return ka(Lt(i)).some(n=>this._registerQuery(n).mql.matches)}observe(i){let n=ka(Lt(i)).map(s=>this._registerQuery(s).observable),o=Ks(n);return o=Zs(o.pipe(He(1)),o.pipe(fr(1),Js(0))),o.pipe(Ln(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new lr(s=>{let a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ze(r),Ln(({matches:s})=>({query:i,matches:s})),oi(this._destroySubject)),mql:r};return this._queries.set(i,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ka(e){return e.map(t=>t.split(",")).reduce((t,i)=>t.concat(i)).map(t=>t.trim())}var af=(()=>{class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ra=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({providers:[af]})}return e})();var uo=(()=>{class e{_platform=u(z);constructor(){}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return lf(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=cf(gf(i));if(r&&(Da(r)===-1||!this.isVisible(r)))return!1;let n=i.nodeName.toLowerCase(),o=Da(i);return i.hasAttribute("contenteditable")?o!==-1:n==="iframe"||n==="object"||this._platform.WEBKIT&&this._platform.IOS&&!mf(i)?!1:n==="audio"?i.hasAttribute("controls")?o!==-1:!1:n==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return _f(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function cf(e){try{return e.frameElement}catch{return null}}function lf(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function hf(e){let t=e.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function df(e){return ff(e)&&e.type=="hidden"}function uf(e){return pf(e)&&e.hasAttribute("href")}function ff(e){return e.nodeName.toLowerCase()=="input"}function pf(e){return e.nodeName.toLowerCase()=="a"}function Pa(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let t=e.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function Da(e){if(!Pa(e))return null;let t=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function mf(e){let t=e.nodeName.toLowerCase(),i=t==="input"&&e.type;return i==="text"||i==="password"||t==="select"||t==="textarea"}function _f(e){return df(e)?!1:hf(e)||uf(e)||e.hasAttribute("contenteditable")||Pa(e)}function gf(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var lo=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,i,r,n,o=!1,s){this._element=t,this._checker=i,this._ngZone=r,this._document=n,this._injector=s,o||this.attachAnchors()}destroy(){let t=this._startAnchor,i=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let i=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let r=this._getFirstTabbableElement(i);return r?.focus(t),!!r}return i.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let i=this._getRegionBoundary("start");return i&&i.focus(t),!!i}focusLastTabbableElement(t){let i=this._getRegionBoundary("end");return i&&i.focus(t),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let i=t.children;for(let r=0;r<i.length;r++){let n=i[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[r]):null;if(n)return n}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let i=t.children;for(let r=i.length-1;r>=0;r--){let n=i[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[r]):null;if(n)return n}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,i){t?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?Ve(t,{injector:this._injector}):setTimeout(t)}},fo=(()=>{class e{_checker=u(uo);_ngZone=u(q);_document=u(M);_injector=u(R);constructor(){u(mi).load(Oa)}create(i,r=!1){return new lo(i,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ue=(function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e})(Ue||{}),Ta="cdk-high-contrast-black-on-white",Aa="cdk-high-contrast-white-on-black",co="cdk-high-contrast-active",xr=(()=>{class e{_platform=u(z);_hasCheckedHighContrastMode;_document=u(M);_breakpointSubscription;constructor(){this._breakpointSubscription=u(ao).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Ue.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,n=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(n&&n.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Ue.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Ue.BLACK_ON_WHITE}return Ue.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(co,Ta,Aa),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Ue.BLACK_ON_WHITE?i.add(co,Ta):r===Ue.WHITE_ON_BLACK&&i.add(co,Aa)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),po=(()=>{class e{constructor(){u(xr)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({imports:[Ra]})}return e})();function kr(e,...t){return t.length?t.some(i=>e[i]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function mo(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function I(e){return e==null?"":typeof e=="string"?e:`${e}px`}var vf=new N("cdk-dir-doc",{providedIn:"root",factory:yf});function yf(){return u(M)}var bf=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Ef(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?bf.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var _i=(()=>{class e{get value(){return this.valueSignal()}valueSignal=qe("ltr");change=new ge;constructor(){let i=u(vf,{optional:!0});if(i){let r=i.body?i.body.dir:null,n=i.documentElement?i.documentElement.dir:null;this.valueSignal.set(Ef(r||n||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var nt;function Na(){if(nt==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return nt=!1,nt;if("scrollBehavior"in document.documentElement.style)nt=!0;else{let e=Element.prototype.scrollTo;e?nt=!/\{\s*\[native code\]\s*\}/.test(e.toString()):nt=!1}}return nt}var We=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({})}return e})();var Cf=20,_o=(()=>{class e{_ngZone=u(q);_platform=u(z);_renderer=u(Te).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new O;_scrolledCount=0;scrollContainers=new Map;register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Cf){return this._platform.isBrowser?new lr(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=i>0?this._scrolled.pipe(Bn(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):dr()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let n=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(De(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_scrollableContainsElement(i,r){let n=it(r),o=i.getElementRef().nativeElement;do if(n==o)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wf=20,gi=(()=>{class e{_platform=u(z);_listeners;_viewportSize;_change=new O;_document=u(M);constructor(){let i=u(q),r=u(Te).createRenderer(null,null);i.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=o=>this._change.next(o);this._listeners=[r.listen("window","resize",n),r.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(i=>i()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:n}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+n,right:i.left+r,height:n,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),n=i.documentElement,o=n.getBoundingClientRect(),s=-o.top||i.body.scrollTop||r.scrollY||n.scrollTop||0,a=-o.left||i.body.scrollLeft||r.scrollX||n.scrollLeft||0;return{top:s,left:a}}change(i=wf){return i>0?this._change.pipe(Bn(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Ma=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({})}return e})(),go=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({imports:[We,Ma,We,Ma]})}return e})();var vo={},ot=(()=>{class e{_appId=u(ia);getId(i){return this._appId!=="ng"&&(i+=this._appId),vo.hasOwnProperty(i)||(vo[i]=0),`${i}${vo[i]++}`}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Fa=Na();function Ht(e){return new Rr(e.get(gi),e.get(M))}var Rr=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,i){this._viewportRuler=t,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=I(-this._previousScrollPosition.left),t.style.top=I(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,i=this._document.body,r=t.style,n=i.style,o=r.scrollBehavior||"",s=n.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Fa&&(r.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Fa&&(r.scrollBehavior=o,n.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.documentElement,r=this._viewportRuler.getViewportSize();return i.scrollHeight>r.height||i.scrollWidth>r.width}};function Ua(e,t){return new Dr(e.get(_o),e.get(q),e.get(gi),t)}var Dr=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,i,r,n){this._scrollDispatcher=t,this._ngZone=i,this._viewportRuler=r,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(De(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var vi=class{enable(){}disable(){}attach(){}};function yo(e,t){return t.some(i=>{let r=e.bottom<i.top,n=e.top>i.bottom,o=e.right<i.left,s=e.left>i.right;return r||n||o||s})}function La(e,t){return t.some(i=>{let r=e.top<i.top,n=e.bottom>i.bottom,o=e.left<i.left,s=e.right>i.right;return r||n||o||s})}function Nr(e,t){return new Tr(e.get(_o),e.get(gi),e.get(q),t)}var Tr=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,i,r,n){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:n}=this._viewportRuler.getViewportSize();yo(i,[{width:r,height:n,bottom:n,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Wa=(()=>{class e{_injector=u(R);constructor(){}noop=()=>new vi;close=i=>Ua(this._injector,i);block=()=>Ht(this._injector);reposition=i=>Nr(this._injector,i);static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Bt=class{positionStrategy;scrollStrategy=new vi;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let i=Object.keys(t);for(let r of i)t[r]!==void 0&&(this[r]=t[r])}}};var Ar=class{connectionPair;scrollableViewProperties;constructor(t,i){this.connectionPair=t,this.scrollableViewProperties=i}};var za=(()=>{class e{_attachedOverlays=[];_document=u(M);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ga=(()=>{class e extends za{_ngZone=u(q);_renderer=u(Te).createRenderer(null,null);_cleanupKeydown;add(i){super.add(i),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=i=>{let r=this._attachedOverlays;for(let n=r.length-1;n>-1;n--)if(r[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[n]._keydownEvents.next(i));break}};static \u0275fac=(()=>{let i;return function(n){return(i||(i=It(e)))(n||e)}})();static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ya=(()=>{class e extends za{_platform=u(z);_ngZone=u(q);_renderer=u(Te).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(i){if(super.add(i),!this._isAttached){let r=this._document.body,n={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,n),o.listen(r,"click",this._clickListener,n),o.listen(r,"auxclick",this._clickListener,n),o.listen(r,"contextmenu",this._clickListener,n)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(i=>i()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=i=>{this._pointerDownEventTarget=Pe(i)};_clickListener=i=>{let r=Pe(i),n=i.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(Ba(a.overlayElement,r)||Ba(a.overlayElement,n))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(i)):c.next(i)}};static \u0275fac=(()=>{let i;return function(n){return(i||(i=It(e)))(n||e)}})();static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Ba(e,t){let i=typeof ShadowRoot<"u"&&ShadowRoot,r=t;for(;r;){if(r===e)return!0;r=i&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var Xa=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,n){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return e})(),Mr=(()=>{class e{_platform=u(z);_containerElement;_document=u(M);_styleLoader=u(mi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||mo()){let n=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}let r=this._document.createElement("div");r.classList.add(i),mo()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(Xa)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bo=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,i,r,n){this._renderer=i,this._ngZone=r,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=i.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},jt=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new O;_attachments=new O;_detachments=new O;_positionStrategy;_scrollStrategy;_locationChanges=cr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new O;_outsidePointerEvents=new O;_afterNextRenderRef;constructor(t,i,r,n,o,s,a,c,l,d=!1,h,_){this._portalOutlet=t,this._host=i,this._pane=r,this._config=n,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._injector=h,this._renderer=_,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Ve(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=G(G({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ar(G({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=I(this._config.width),t.height=I(this._config.height),t.minWidth=I(this._config.minWidth),t.minHeight=I(this._config.minHeight),t.maxWidth=I(this._config.maxWidth),t.maxHeight=I(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new bo(this._document,this._renderer,this._ngZone,i=>{this._backdropClick.next(i)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,i,r){let n=Lt(i||[]).filter(o=>!!o);n.length&&(r?t.classList.add(...n):t.classList.remove(...n))}_detachContentWhenEmpty(){let t=!1;try{this._detachContentAfterRenderRef=Ve(()=>{t=!0,this._detachContent()},{injector:this._injector})}catch(i){if(t)throw i;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},ja="cdk-overlay-connected-position-bounding-box",Sf=/([A-Za-z%]+)$/;function $a(e,t){return new Ir(t,e.get(gi),e.get(M),e.get(z),e.get(Mr))}var Ir=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new O;_resizeSubscription=cr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,i,r,n,o){this._viewportRuler=i,this._document=r,this._platform=n,this._overlayContainer=o,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(ja),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,i=this._overlayRect,r=this._viewportRect,n=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,n,a),l=this._getOverlayPoint(c,i,a),d=this._getOverlayFit(l,i,r,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,r)){o.push({position:a,origin:c,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:i})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&st(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ja),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,i)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,i,r){let n;if(r.originX=="center")n=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;n=r.originX=="start"?s:a}i.left<0&&(n-=i.left);let o;return r.originY=="center"?o=t.top+t.height/2:o=r.originY=="top"?t.top:t.bottom,i.top<0&&(o-=i.top),{x:n,y:o}}_getOverlayPoint(t,i,r){let n;r.overlayX=="center"?n=-i.width/2:r.overlayX==="start"?n=this._isRtl()?-i.width:0:n=this._isRtl()?0:-i.width;let o;return r.overlayY=="center"?o=-i.height/2:o=r.overlayY=="top"?0:-i.height,{x:t.x+n,y:t.y+o}}_getOverlayFit(t,i,r,n){let o=qa(i),{x:s,y:a}=t,c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(s+=c),l&&(a+=l);let d=0-s,h=s+o.width-r.width,_=0-a,g=a+o.height-r.height,w=this._subtractOverflows(o.width,d,h),k=this._subtractOverflows(o.height,_,g),E=w*k;return{visibleArea:E,isCompletelyWithinViewport:o.width*o.height===E,fitsInViewportVertically:k===o.height,fitsInViewportHorizontally:w==o.width}}_canFitWithFlexibleDimensions(t,i,r){if(this._hasFlexibleDimensions){let n=r.bottom-i.y,o=r.right-i.x,s=Ha(this._overlayRef.getConfig().minHeight),a=Ha(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=n,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,i,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let n=qa(i),o=this._viewportRect,s=Math.max(t.x+n.width-o.width,0),a=Math.max(t.y+n.height-o.height,0),c=Math.max(o.top-r.top-t.y,0),l=Math.max(o.left-r.left-t.x,0),d=0,h=0;return n.width<=o.width?d=l||-s:d=t.x<this._viewportMargin?o.left-r.left-t.x:0,n.height<=o.height?h=c||-a:h=t.y<this._viewportMargin?o.top-r.top-t.y:0,this._previousPushAmount={x:d,y:h},{x:t.x+d,y:t.y+h}}_applyPosition(t,i){if(this._setTransformOrigin(t),this._setOverlayElementStyles(i,t),this._setBoundingBoxStyles(i,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Of(this._lastScrollVisibility,r)){let n=new Ar(t,r);this._positionChanges.next(n)}this._lastScrollVisibility=r}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,n=t.overlayY;t.overlayX==="center"?r="center":this._isRtl()?r=t.overlayX==="start"?"right":"left":r=t.overlayX==="start"?"left":"right";for(let o=0;o<i.length;o++)i[o].style.transformOrigin=`${r} ${n}`}_calculateBoundingBoxRect(t,i){let r=this._viewportRect,n=this._isRtl(),o,s,a;if(i.overlayY==="top")s=t.y,o=r.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=r.height-t.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let g=Math.min(r.bottom-t.y+r.top,t.y),w=this._lastBoundingBoxSize.height;o=g*2,s=t.y-g,o>w&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-w/2)}let c=i.overlayX==="start"&&!n||i.overlayX==="end"&&n,l=i.overlayX==="end"&&!n||i.overlayX==="start"&&n,d,h,_;if(l)_=r.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(c)h=t.x,d=r.right-t.x;else{let g=Math.min(r.right-t.x+r.left,t.x),w=this._lastBoundingBoxSize.width;d=g*2,h=t.x-g,d>w&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-w/2)}return{top:s,left:h,bottom:a,right:_,width:d,height:o}}_setBoundingBoxStyles(t,i){let r=this._calculateBoundingBoxRect(t,i);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;n.height=I(r.height),n.top=I(r.top),n.bottom=I(r.bottom),n.width=I(r.width),n.left=I(r.left),n.right=I(r.right),i.overlayX==="center"?n.alignItems="center":n.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?n.justifyContent="center":n.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",o&&(n.maxHeight=I(o)),s&&(n.maxWidth=I(s))}this._lastBoundingBoxSize=r,st(this._boundingBox.style,n)}_resetBoundingBoxStyles(){st(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){st(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,i){let r={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(n){let d=this._viewportRuler.getViewportScrollPosition();st(r,this._getExactOverlayY(i,t,d)),st(r,this._getExactOverlayX(i,t,d))}else r.position="static";let a="",c=this._getOffset(i,"x"),l=this._getOffset(i,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),r.transform=a.trim(),s.maxHeight&&(n?r.maxHeight=I(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(n?r.maxWidth=I(s.maxWidth):o&&(r.maxWidth="")),st(this._pane.style,r)}_getExactOverlayY(t,i,r){let n={top:"",bottom:""},o=this._getOverlayPoint(i,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;n.bottom=`${s-(o.y+this._overlayRect.height)}px`}else n.top=I(o.y);return n}_getExactOverlayX(t,i,r){let n={left:"",right:""},o=this._getOverlayPoint(i,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;n.right=`${a-(o.x+this._overlayRect.width)}px`}else n.left=I(o.x);return n}_getScrollVisibility(){let t=this._getOriginRect(),i=this._pane.getBoundingClientRect(),r=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:La(t,r),isOriginOutsideView:yo(t,r),isOverlayClipped:La(i,r),isOverlayOutsideView:yo(i,r)}}_subtractOverflows(t,...i){return i.reduce((r,n)=>r-Math.max(n,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+i-this._viewportMargin,width:t-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,i){return i==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Lt(t).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof oe)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let i=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+i,height:r,width:i}}};function st(e,t){for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Ha(e){if(typeof e!="number"&&e!=null){let[t,i]=e.split(Sf);return!i||i==="px"?parseFloat(t):null}return e||null}function qa(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function Of(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var Va="cdk-global-overlay-wrapper";function qt(e){return new Pr}var Pr=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let i=t.getConfig();this._overlayRef=t,this._width&&!i.width&&t.updateSize({width:this._width}),this._height&&!i.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Va),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:s,maxHeight:a}=r,c=(n==="100%"||n==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,h=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",g="",w="",k="";c?k="flex-start":d==="center"?(k="center",_?w=h:g=h):_?d==="left"||d==="end"?(k="flex-end",g=h):(d==="right"||d==="start")&&(k="flex-start",w=h):d==="left"||d==="start"?(k="flex-start",g=h):(d==="right"||d==="end")&&(k="flex-end",w=h),t.position=this._cssPosition,t.marginLeft=c?"0":g,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":w,i.justifyContent=k,i.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,r=i.style;i.classList.remove(Va),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Ka=(()=>{class e{_injector=u(R);constructor(){}global(){return qt()}flexibleConnectedTo(i){return $a(this._injector,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fr(e,t){e.get(mi).load(Xa);let i=e.get(Mr),r=e.get(M),n=e.get(ot),o=e.get(li),s=e.get(_i),a=r.createElement("div"),c=r.createElement("div");c.id=n.getId("cdk-overlay-"),c.classList.add("cdk-overlay-pane"),a.appendChild(c),i.getContainerElement().appendChild(a);let l=new br(c,o,e),d=new Bt(t),h=e.get(ci,null,{optional:!0})||e.get(Te).createRenderer(null,null);return d.direction=d.direction||s.value,new jt(l,a,c,d,e.get(q),e.get(Ga),r,e.get(sa),e.get(Ya),t?.disableAnimations??e.get(pr,null,{optional:!0})==="NoopAnimations",e.get(At),h)}var Za=(()=>{class e{scrollStrategies=u(Wa);_positionBuilder=u(Ka);_injector=u(R);constructor(){}create(i){return Fr(this._injector,i)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var xf=new N("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=u(R);return()=>Nr(e)}});function kf(e){let t=u(R);return()=>Nr(t)}var Rf={provide:xf,useFactory:kf},yi=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({providers:[Za,Rf],imports:[We,tt,go,go]})}return e})();function Df(e,t){}var ze=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var Co=(()=>{class e extends Ft{_elementRef=u(oe);_focusTrapFactory=u(fo);_config;_interactivityChecker=u(uo);_ngZone=u(q);_focusMonitor=u(Sa);_renderer=u(ci);_changeDetectorRef=u(io);_injector=u(R);_platform=u(z);_document=u(M);_portalOutlet;_focusTrapped=new O;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=u(ze,{optional:!0})||new ze,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}attachDomPortal=i=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(i);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{o(),s(),i.removeAttribute("tabindex")},o=this._renderer.listen(i,"blur",n),s=this._renderer.listen(i,"mousedown",n)})),i.focus(r)}_focusByCssSelector(i,r){let n=this._elementRef.nativeElement.querySelector(i);n&&this._forceFocus(n,r)}_trapFocus(i){this._isDestroyed||Ve(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(i);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(i)||this._focusDialogContainer(i);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',i);break;default:this._focusByCssSelector(this._config.autoFocus,i);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let n=Er(),o=this._elementRef.nativeElement;(!n||n===this._document.body||n===o||o.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(i){this._elementRef.nativeElement.focus?.(i)}_containsFocus(){let i=this._elementRef.nativeElement,r=Er();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Er()))}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ee({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,n){if(r&1&&Xn(ui,7),r&2){let o;$n(o=Kn())&&(n._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,n){r&2&&hi("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[Je],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,n){r&1&&_r(0,Df,0,0,"ng-template",0)},dependencies:[ui],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return e})(),bi=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new O;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,i){this.overlayRef=t,this.config=i,this.disableClose=i.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=i.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!kr(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=t.detachments().subscribe(()=>{i.closeOnOverlayDetachments!==!1&&this.close()})}close(t,i){if(this._canClose(t)){let r=this.closed;this.containerInstance._closeInteractionType=i?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",i=""){return this.overlayRef.updateSize({width:t,height:i}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}_canClose(t){let i=this.config;return!!this.containerInstance&&(!i.closePredicate||i.closePredicate(t,i,this.componentInstance))}},Tf=new N("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=u(R);return()=>Ht(e)}}),Af=new N("DialogData"),If=new N("DefaultDialogConfig");function Pf(e){let t=qe(e),i=new ge;return{valueSignal:t,get value(){return t()},change:i,ngOnDestroy(){i.complete()}}}var wo=(()=>{class e{_injector=u(R);_defaultOptions=u(If,{optional:!0});_parentDialog=u(e,{optional:!0,skipSelf:!0});_overlayContainer=u(Mr);_idGenerator=u(ot);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new O;_afterOpenedAtThisLevel=new O;_ariaHiddenElements=new Map;_scrollStrategy=u(Tf);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ur(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ze(void 0)));constructor(){}open(i,r){let n=this._defaultOptions||new ze;r=G(G({},n),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),s=Fr(this._injector,o),a=new bi(s,r),c=this._attachContainer(s,a,r);if(a.containerInstance=c,!this.openDialogs.length){let l=this._overlayContainer.getContainerElement();c._focusTrapped?c._focusTrapped.pipe(He(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(l)}):this._hideNonDialogContentFromAssistiveTechnology(l)}return this._attachDialogContent(i,a,c,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Eo(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){Eo(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),Eo(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Bt({positionStrategy:i.positionStrategy||qt().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation,disableAnimations:i.disableAnimations});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,n){let o=n.injector||n.viewContainerRef?.injector,s=[{provide:ze,useValue:n},{provide:bi,useValue:r},{provide:jt,useValue:i}],a;n.container?typeof n.container=="function"?a=n.container:(a=n.container.type,s.push(...n.container.providers(n))):a=Co;let c=new Nt(a,n.viewContainerRef,R.create({parent:o||this._injector,providers:s}));return i.attach(c).instance}_attachDialogContent(i,r,n,o){if(i instanceof ai){let s=this._createInjector(o,r,n,void 0),a={$implicit:o.data,dialogRef:r};o.templateContext&&(a=G(G({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),n.attachTemplatePortal(new Mt(i,null,a,s))}else{let s=this._createInjector(o,r,n,this._injector),a=n.attachComponentPortal(new Nt(i,o.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(i,r,n,o){let s=i.injector||i.viewContainerRef?.injector,a=[{provide:Af,useValue:i.data},{provide:bi,useValue:r}];return i.providers&&(typeof i.providers=="function"?a.push(...i.providers(r,i,n)):a.push(...i.providers)),i.direction&&(!s||!s.get(_i,null,{optional:!0}))&&a.push({provide:_i,useValue:Pf(i.direction)}),R.create({parent:s||o,providers:a})}_removeOpenDialog(i,r){let n=this.openDialogs.indexOf(i);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(i){if(i.parentElement){let r=i.parentElement.children;for(let n=r.length-1;n>-1;n--){let o=r[n];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Eo(e,t){let i=e.length;for(;i--;)t(e[i])}var Ja=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({providers:[wo],imports:[yi,tt,po,tt]})}return e})();var Nf=new N("MATERIAL_ANIMATIONS");var ec=null;function Mf(){return u(Nf,{optional:!0})?.animationsDisabled||u(pr,{optional:!0})==="NoopAnimations"?"di-disabled":(ec??=u(Or).matchMedia("(prefers-reduced-motion)").matches,ec?"reduced-motion":"enabled")}function So(){return Mf()!=="enabled"}var Oo=(()=>{class e{constructor(){u(xr)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({imports:[We,We]})}return e})();function Ff(e,t){}var Ci=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},xo="mdc-dialog--open",tc="mdc-dialog--opening",ic="mdc-dialog--closing",Lf=150,Bf=75,oc=(()=>{class e extends Co{_animationStateChanged=new ge;_animationsEnabled=!So();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?nc(this._config.enterAnimationDuration)??Lf:0;_exitAnimationDuration=this._animationsEnabled?nc(this._config.exitAnimationDuration)??Bf:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(rc,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(tc,xo)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(xo),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(xo),this._animationsEnabled?(this._hostElement.style.setProperty(rc,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(ic)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(tc,ic)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let i;return function(n){return(i||(i=It(e)))(n||e)}})();static \u0275cmp=ee({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,n){r&2&&(oa("id",n._config.id),hi("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Zn("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[Je],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,n){r&1&&(A(0,"div",0)(1,"div",1),_r(2,Ff,0,0,"ng-template",2),V()())},dependencies:[ui],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return e})(),rc="--mat-dialog-transition-duration";function nc(e){return e==null?null:typeof e=="number"?e:e.endsWith("ms")?pi(e.substring(0,e.length-2)):e.endsWith("s")?pi(e.substring(0,e.length-1))*1e3:e==="0"?0:null}var Ei=(function(e){return e[e.OPEN=0]="OPEN",e[e.CLOSING=1]="CLOSING",e[e.CLOSED=2]="CLOSED",e})(Ei||{}),Vt=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new O;_beforeClosed=new O;_result;_closeFallbackTimeout;_state=Ei.OPEN;_closeInteractionType;constructor(t,i,r){this._ref=t,this._config=i,this._containerInstance=r,this.disableClose=i.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(De(n=>n.state==="opened"),He(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(De(n=>n.state==="closed"),He(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Qs(this.backdropClick(),this.keydownEvents().pipe(De(n=>n.keyCode===27&&!this.disableClose&&!kr(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),sc(this,n.type==="keydown"?"keyboard":"mouse"))})}close(t){let i=this._config.closePredicate;i&&!i(t,this._config,this.componentInstance)||(this._result=t,this._containerInstance._animationStateChanged.pipe(De(r=>r.state==="closing"),He(1)).subscribe(r=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),r.totalTime+100)}),this._state=Ei.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let i=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?i.left(t.left):i.right(t.right):i.centerHorizontally(),t&&(t.top||t.bottom)?t.top?i.top(t.top):i.bottom(t.bottom):i.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",i=""){return this._ref.updateSize(t,i),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=Ei.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function sc(e,t,i){return e._closeInteractionType=t,e.close(i)}var ac=new N("MatMdcDialogData"),cc=new N("mat-mdc-dialog-default-options"),lc=new N("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let e=u(R);return()=>Ht(e)}}),Lr=(()=>{class e{_defaultOptions=u(cc,{optional:!0});_scrollStrategy=u(lc);_parentDialog=u(e,{optional:!0,skipSelf:!0});_idGenerator=u(ot);_injector=u(R);_dialog=u(wo);_animationsDisabled=So();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new O;_afterOpenedAtThisLevel=new O;dialogConfigClass=Ci;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ur(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ze(void 0)));constructor(){this._dialogRefConstructor=Vt,this._dialogContainerType=oc,this._dialogDataToken=ac}open(i,r){let n;r=G(G({},this._defaultOptions||new Ci),r),r.id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,ar(G({},r),{positionStrategy:qt(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||r.enterAnimationDuration?.toLocaleString()==="0"||r.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ze,useValue:r}]},templateContext:()=>({dialogRef:n}),providers:(s,a,c)=>(n=new this._dialogRefConstructor(s,r,c),n.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=o.componentRef,n.componentInstance=o.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(n);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var wi=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=B({type:e});static \u0275inj=L({providers:[Lr],imports:[Ja,yi,tt,Oo,Oo]})}return e})();var Br=class e{constructor(t){this.dialogRef=t}project={name:"",language:"",author:localStorage.getItem("username")??"anuj"};close(){this.dialogRef.close()}save(){this.dialogRef.close(this.project)}static \u0275fac=function(i){return new(i||e)(Qe(Vt))};static \u0275cmp=ee({type:e,selectors:[["app-create-project"]],decls:39,vars:2,consts:[[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"close-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"modal-header"],[1,"modal-title"],[1,"icon"],[1,"modal-subtitle"],[1,"modal-body"],[1,"form-group"],[1,"form-label"],[1,"relative"],["type","text","placeholder","Enter project name",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled","","selected","","hidden",""],["value","Java"],["value","Python"],["value","C++"],["value","JavaScript"],["value","TypeScript"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(A(0,"div",0),et("click",function(){return r.close()}),A(1,"div",1),et("click",function(o){return o.stopPropagation()}),A(2,"button",2),et("click",function(){return r.close()}),ea(),A(3,"svg",3),na(4,"path",4),V()(),ta(),A(5,"div",5)(6,"h2",6)(7,"span",7),S(8,"\u{1F680}"),V(),S(9," Create Project "),V(),A(10,"p",8),S(11,"Start something amazing with just a few clicks."),V()(),A(12,"div",9)(13,"div",10)(14,"label",11),S(15,"Project Name"),V(),A(16,"div",12)(17,"input",13),to("ngModelChange",function(o){return eo(r.project.name,o)||(r.project.name=o),o}),V()()(),A(18,"div",10)(19,"label",11),S(20,"Language"),V(),A(21,"select",14),to("ngModelChange",function(o){return eo(r.project.language,o)||(r.project.language=o),o}),A(22,"option",15),S(23,"Select a language"),V(),A(24,"option",16),S(25,"Java"),V(),A(26,"option",17),S(27,"Python"),V(),A(28,"option",18),S(29,"C++"),V(),A(30,"option",19),S(31,"JavaScript"),V(),A(32,"option",20),S(33,"TypeScript"),V()()()(),A(34,"div",21)(35,"button",22),et("click",function(){return r.close()}),S(36," Cancel "),V(),A(37,"button",23),et("click",function(){return r.save()}),S(38," Save "),V()()()()),i&2&&(se(17),Jn("ngModel",r.project.name),se(4),Jn("ngModel",r.project.language))},dependencies:[wi,_a,pa,ma,ha,fa,da,ua],styles:["[_ngcontent-%COMP%]:root{--primary-indigo: #4338ca;--primary-indigo-dark: #3730a3;--gray-100: #f3f4f6;--gray-200: #e5e7eb;--gray-300: #d1d5db;--gray-400: #9ca3af;--gray-500: #6b7280;--gray-600: #4b5563;--gray-800: #1f2937;--white: #ffffff;--black-transparent: rgba(0, 0, 0, .7)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:var(--black-transparent);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:50;padding:1rem}.modal-container[_ngcontent-%COMP%]{position:relative;background-color:#fff;border-radius:1.5rem;box-shadow:0 25px 50px -12px #00000040;max-width:32rem;width:100%;transition:transform .3s ease-in-out;padding:2rem}.modal-container[_ngcontent-%COMP%]:hover{transform:scale(1.01)}.close-btn[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem;background:none;border:none;cursor:pointer;font-size:1.5rem;color:var(--gray-400);transition:color .3s}.close-btn[_ngcontent-%COMP%]:hover{color:var(--gray-600)}.icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.modal-header[_ngcontent-%COMP%]{padding-bottom:1rem}.modal-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:var(--gray-800);display:flex;align-items:center;gap:.75rem;letter-spacing:-.025em}.modal-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:2.25rem}.modal-subtitle[_ngcontent-%COMP%]{color:var(--gray-500);font-size:.875rem;margin-top:.5rem}.modal-body[_ngcontent-%COMP%]{padding-top:0;padding-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:var(--gray-600);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:100%;border-radius:.75rem;border:1px solid var(--gray-300);padding:.75rem 1rem;background-color:var(--gray-100);transition:all .2s ease;box-shadow:0 1px 2px #0000000d;color:var(--gray-800)}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-indigo);box-shadow:0 0 0 2px var(--primary-indigo)}.modal-actions[_ngcontent-%COMP%]{padding-top:0;display:flex;justify-content:flex-end;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem;border-radius:.75rem;font-weight:600;transition:all .2s ease;cursor:pointer;border:1px solid transparent;box-shadow:0 1px 2px #0000000d}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--white);border-color:var(--gray-300);color:var(--gray-600)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--gray-50)}.btn-primary[_ngcontent-%COMP%]{color:var(--white);background:linear-gradient(to right,var(--primary-indigo),var(--primary-indigo-dark));box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.btn-primary[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:#e7eaf1;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}"]})};var jr=class e{constructor(t){this.platformId=t}getToken(){return J(this,null,function*(){let t=null;if(Ie(this.platformId)&&(t=localStorage.getItem("jwt")),!t)throw new Error("No JWT token found. Login again.");return t})}createProject(t){return J(this,null,function*(){let i=(yield this.getToken()).trim();console.log(t);let r=yield fetch("http://localhost:8080/projects",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(n=>{console.log(n.text())}).catch(n=>{throw console.error("Request failed:",n),n})})}getProjects(){return J(this,null,function*(){let t=(yield this.getToken()).trim();console.log("Auth header:"+t+"end");let i=(Ie(this.platformId)?localStorage.getItem("username"):null)?.trim();if(!i)throw new Error("No username found in local storage");console.log(t);try{let r=yield fetch(`http://localhost:8080/auth/fetch-projects?username=${encodeURIComponent(i)}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return yield r.json()}catch(r){throw console.error("Request failed:",r),r}})}static \u0275fac=function(i){return new(i||e)(si(Pt))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};function dc(e,t){e.terminate=function(){let i=()=>{};this.onerror=i,this.onmessage=i,this.onopen=i;let r=new Date,n=Math.random().toString().substring(2,8),o=this.onclose;this.onclose=s=>{let a=new Date().getTime()-r.getTime();t(`Discarded socket (#${n})  closed after ${a}ms, with code/reason: ${s.code}/${s.reason}`)},this.close(),o?.call(e,{code:4001,reason:`Quick discarding socket (#${n}) without waiting for the shutdown sequence.`,wasClean:!1})}}var at={LF:`
`,NULL:"\0"};var Si=class e{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(t){let{command:i,headers:r,body:n,binaryBody:o,escapeHeaderValues:s,skipContentLengthHeader:a}=t;this.command=i,this.headers=Object.assign({},r||{}),o?(this._binaryBody=o,this.isBinaryBody=!0):(this._body=n||"",this.isBinaryBody=!1),this.escapeHeaderValues=s||!1,this.skipContentLengthHeader=a||!1}static fromRawFrame(t,i){let r={},n=o=>o.replace(/^\s+|\s+$/g,"");for(let o of t.headers.reverse()){let s=o.indexOf(":"),a=n(o[0]),c=n(o[1]);i&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(c=e.hdrValueUnEscape(c)),r[a]=c}return new e({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:i})}toString(){return this.serializeCmdAndHeaders()}serialize(){let t=this.serializeCmdAndHeaders();return this.isBinaryBody?e.toUnit8Array(t,this._binaryBody).buffer:t+this._body+at.NULL}serializeCmdAndHeaders(){let t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(let i of Object.keys(this.headers||{})){let r=this.headers[i];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${i}:${e.hdrValueEscape(`${r}`)}`):t.push(`${i}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(at.LF)+at.LF+at.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){let t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,i){let r=new TextEncoder().encode(t),n=new Uint8Array([0]),o=new Uint8Array(r.length+i.length+n.length);return o.set(r),o.set(i,r.length),o.set(n,r.length+i.length),o}static marshall(t){return new e(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}};var Hr=class{constructor(t,i){this.onFrame=t,this.onIncomingPing=i,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,i=!1){let r;if(typeof t=="string"?r=this._encoder.encode(t):r=new Uint8Array(t),i&&r[r.length-1]!==0){let n=new Uint8Array(r.length+1);n.set(r,0),n[r.length]=0,r=n}for(let n=0;n<r.length;n++){let o=r[n];this._onByte(o)}}_collectFrame(t){if(t!==0&&t!==13){if(t===10){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==13){if(t===10){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==13){if(t===10){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===58){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==13){if(t===10){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){let t=this._results.headers.filter(i=>i[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===0){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){let t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}};var Ne=(function(e){return e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED",e})(Ne||{}),ue=(function(e){return e[e.ACTIVE=0]="ACTIVE",e[e.DEACTIVATING=1]="DEACTIVATING",e[e.INACTIVE=2]="INACTIVE",e})(ue||{}),qr=(function(e){return e[e.LINEAR=0]="LINEAR",e[e.EXPONENTIAL=1]="EXPONENTIAL",e})(qr||{}),Ut=(function(e){return e.Interval="interval",e.Worker="worker",e})(Ut||{});var Vr=class{constructor(t,i=Ut.Interval,r){this._interval=t,this._strategy=i,this._debug=r,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===Ut.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=i=>t(i.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){let i=Date.now();this._timer=setInterval(()=>{t(Date.now()-i)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}};var H=class{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}};H.V1_0="1.0";H.V1_1="1.1";H.V1_2="1.2";H.default=new H([H.V1_2,H.V1_1,H.V1_0]);var Ur=class{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,i,r){this._client=t,this._webSocket=i,this._connected=!1,this._serverFrameHandlers={CONNECTED:n=>{this.debug(`connected to server ${n.headers.server}`),this._connected=!0,this._connectedVersion=n.headers.version,this._connectedVersion===H.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(n.headers),this.onConnect(n)},MESSAGE:n=>{let o=n.headers.subscription,s=this._subscriptions[o]||this.onUnhandledMessage,a=n,c=this,l=this._connectedVersion===H.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(d={})=>c.ack(l,o,d),a.nack=(d={})=>c.nack(l,o,d),s(a)},RECEIPT:n=>{let o=this._receiptWatchers[n.headers["receipt-id"]];o?(o(n),delete this._receiptWatchers[n.headers["receipt-id"]]):this.onUnhandledReceipt(n)},ERROR:n=>{this.onStompError(n)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatToleranceMultiplier=r.heartbeatGracePeriods,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame,this.onHeartbeatReceived=r.onHeartbeatReceived,this.onHeartbeatLost=r.onHeartbeatLost}start(){let t=new Hr(i=>{let r=Si.fromRawFrame(i,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=i=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){let r=i.data instanceof ArrayBuffer?new TextDecoder().decode(i.data):i.data;this.debug(`<<< ${r}`)}t.parseChunk(i.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=i=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(i)},this._webSocket.onerror=i=>{this.onWebSocketError(i)},this._webSocket.onopen=()=>{let i=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),i["accept-version"]=this.stompVersions.supportedVersions(),i["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:i})}}_setupHeartbeat(t){if(t.version!==H.V1_1&&t.version!==H.V1_2||!t["heart-beat"])return;let[i,r]=t["heart-beat"].split(",").map(n=>parseInt(n,10));if(this.heartbeatOutgoing!==0&&r!==0){let n=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${n}ms`),this._pinger=new Vr(n,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Ne.OPEN&&(this._webSocket.send(at.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&i!==0){let n=Math.max(this.heartbeatIncoming,i);this.debug(`check PONG every ${n}ms`),this._ponger=setInterval(()=>{let o=Date.now()-this._lastServerActivityTS;o>n*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${o}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},n)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Ne.CONNECTING||this._webSocket.readyState===Ne.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&dc(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){let{command:i,headers:r,body:n,binaryBody:o,skipContentLengthHeader:s}=t,a=new Si({command:i,headers:r,body:n,binaryBody:o,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:s}),c=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${c}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof c=="string"&&(c=new TextEncoder().encode(c)),typeof c!="string"||!this.splitLargeFrames)this._webSocket.send(c);else{let l=c;for(;l.length>0;){let d=l.substring(0,this.maxWebSocketChunkSize);l=l.substring(this.maxWebSocketChunkSize),this._webSocket.send(d),this.debug(`chunk sent = ${d.length}, remaining = ${l.length}`)}}}dispose(){if(this.connected)try{let t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,i=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(i)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Ne.CONNECTING||this._webSocket.readyState===Ne.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){let{destination:i,headers:r,body:n,binaryBody:o,skipContentLengthHeader:s}=t,a=Object.assign({destination:i},r);this._transmit({command:"SEND",headers:a,body:n,binaryBody:o,skipContentLengthHeader:s})}watchForReceipt(t,i){this._receiptWatchers[t]=i}subscribe(t,i,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=t,this._subscriptions[r.id]=i,this._transmit({command:"SUBSCRIBE",headers:r});let n=this;return{id:r.id,unsubscribe(o){return n.unsubscribe(r.id,o)}}}unsubscribe(t,i={}){i=Object.assign({},i),delete this._subscriptions[t],i.id=t,this._transmit({command:"UNSUBSCRIBE",headers:i})}begin(t){let i=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:i}});let r=this;return{id:i,commit(){r.commit(i)},abort(){r.abort(i)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,i,r={}){r=Object.assign({},r),this._connectedVersion===H.V1_2?r.id=t:r["message-id"]=t,r.subscription=i,this._transmit({command:"ACK",headers:r})}nack(t,i,r={}){return r=Object.assign({},r),this._connectedVersion===H.V1_2?r.id=t:r["message-id"]=t,r.subscription=i,this._transmit({command:"NACK",headers:r})}};var Oi=class{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===ue.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=H.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=qr.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=Ut.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=ue.INACTIVE;let i=()=>{};this.debug=i,this.beforeConnect=i,this.onConnect=i,this.onDisconnect=i,this.onUnhandledMessage=i,this.onUnhandledReceipt=i,this.onUnhandledFrame=i,this.onHeartbeatReceived=i,this.onHeartbeatLost=i,this.onStompError=i,this.onWebSocketClose=i,this.onWebSocketError=i,this.logRawCommunication=!1,this.onChangeState=i,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){let t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(ue.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===ue.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}_connect(){return J(this,null,function*(){if(yield this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");let t=this._createWebSocket();this._stompHandler=new Ur(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:i=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(i)},onDisconnect:i=>{this.onDisconnect(i)},onStompError:i=>{this.onStompError(i)},onWebSocketClose:i=>{this._stompHandler=void 0,this.state===ue.DEACTIVATING&&this._changeState(ue.INACTIVE),this.onWebSocketClose(i),this.active&&this._schedule_reconnect()},onWebSocketError:i=>{this.onWebSocketError(i)},onUnhandledMessage:i=>{this.onUnhandledMessage(i)},onUnhandledReceipt:i=>{this.onUnhandledReceipt(i)},onUnhandledFrame:i=>{this.onUnhandledFrame(i)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()})}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===qr.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}deactivate(){return J(this,arguments,function*(t={}){let i=t.force||!1,r=this.active,n;if(this.state===ue.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(ue.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Ne.CLOSED){let o=this._stompHandler.onWebSocketClose;n=new Promise((s,a)=>{this._stompHandler.onWebSocketClose=c=>{o(c),s()}})}else return this._changeState(ue.INACTIVE),Promise.resolve();return i?this._stompHandler?.discardWebsocket():r&&this._disposeStompHandler(),n})}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,i){this._checkConnection(),this._stompHandler.watchForReceipt(t,i)}subscribe(t,i,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,i,r)}unsubscribe(t,i={}){this._checkConnection(),this._stompHandler.unsubscribe(t,i)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,i,r={}){this._checkConnection(),this._stompHandler.ack(t,i,r)}nack(t,i,r={}){this._checkConnection(),this._stompHandler.nack(t,i,r)}};var $s=Zu(Yu());var Pn=class e{constructor(t,i){this.http=t;this.platformId=i}stompClient=null;activeProjectId=null;codeSubject=new hr("");code$=this.codeSubject.asObservable();ws=null;localStorage;checkAndOpenProject(t){return J(this,null,function*(){let i=null;if(Ie(this.platformId)&&(i=localStorage.getItem("jwt")),!i)throw new Error("No JWT token found. Login again.");let r=yield fetch(`http://localhost:8080/projects/${t}`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch project: ${r.status} ${r.statusText}`);let n=yield r.text();if(!n)throw new Error("Project API returned empty response");let o=JSON.parse(n);return console.log("\u{1F4E6} Project fetched:",o),this.connectWebSocket(t,i),o})}setCode(t){this.codeSubject.next(t)}connectWebSocket(t,i){if(this.isConnected()){console.log("\u26A0\uFE0F Already connected to a project.");return}this.activeProjectId=t,console.log("Trying ot connect ot wesocket now"),this.stompClient=new Oi({webSocketFactory:()=>new $s.default("http://localhost:8080/ws"),connectHeaders:{Authorization:`Bearer ${i}`},onConnect:()=>{console.log("\u2705 Connected to WebSocket for project:",t),this.stompClient?.subscribe(`/topic/project/${t}/code`,r=>{r.body&&(console.log("\u{1F4E9} Received code update:",r.body),this.codeSubject.next(r.body))})},onStompError:r=>{console.error("\u274C Broker reported error:",r.headers.message),console.error("Details:",r.body)},onWebSocketClose:r=>{console.warn("\u26A0\uFE0F WebSocket closed:",r)}}),this.stompClient.activate()}sendMessage(t,i){this.stompClient&&this.stompClient.connected&&this.stompClient.publish({destination:`/app/project/${i}/code`,body:t})}updateProjectCode(t,i){this.stompClient&&this.stompClient.connected?(this.stompClient.publish({destination:`/app/project/${t}/code`,body:i}),console.log("\u{1F4E4} Sent code update:",i)):console.error("\u274C Cannot send, WebSocket not connected.")}disconnect(){this.stompClient&&(this.stompClient.deactivate().then(()=>{console.log("\u{1F50C} Disconnected from WebSocket.")}),this.stompClient=null,this.activeProjectId=null)}isConnected(){return!!this.stompClient?.connected}runProject(t,i,r){let n=null;return Ie(this.platformId)&&(n=localStorage.getItem("jwt")),n?fetch("http://localhost:8080/projects/execute",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({language:t,code:i,input:r})}).then(o=>o.json()).then(o=>(console.log("Server response:",o),o.output)).catch(o=>(console.error("Error:",o),`Error: ${o}`)):(console.error("No JWT token found in localStorage."),Promise.resolve("login again"))}getToken(){return J(this,null,function*(){let t=null;if(Ie(this.platformId)&&(t=localStorage.getItem("jwt")),!t)throw new Error("No JWT token found. Login again.");return t})}fetchProjectFromApi(t){return J(this,null,function*(){let i=yield this.getToken();console.log(i),this.http.get(`http://localhost:8080/projects/${t}`,{headers:{Authorization:`Bearer ${i}`}}).subscribe({next:r=>{console.log("\u{1F4E6} Project fetched:",r),r.inUse&&(console.log("Project is in use, connecting to WebSocket..."+r.inUse),this.connect(t,i)),r.code&&this.codeSubject.next(r.code)},error:r=>{console.error("Failed to fetch project:",r)}})})}connect(t,i){if(this.isConnected()){console.log("\u26A0\uFE0F Already connected to a project.");return}console.log(i),this.activeProjectId=t,this.stompClient=new Oi({webSocketFactory:()=>new $s.default("http://localhost:8080/ws"),connectHeaders:{Authorization:`Bearer ${i}`},reconnectDelay:5e3,debug:r=>console.log(r),onConnect:()=>{console.log("\u2705 Connected to WebSocket for project:",t),this.stompClient?.subscribe(`/topic/project/${t}/code`,r=>{r.body&&(console.log("\u{1F4E9} Received code update:",r.body),this.codeSubject.next(r.body))})},onStompError:r=>{console.error("\u274C Broker error:",r.headers.message),console.error(r.body)}}),this.stompClient.activate()}updateProject(t,i){this.stompClient&&this.stompClient.connected?(this.stompClient.publish({destination:`/app/project/${t}/code`,body:i}),console.log("\u{1F4E4} Sent code update:",i)):console.error("\u274C Cannot send, WebSocket not connected.")}fetchProject(){return this.code$}generateShareableLink(t){return J(this,null,function*(){let i=yield this.getToken();if(t==null||t==null)throw new Error("Project ID is null or undefined");try{let r=yield fetch(`http://localhost:8080/projects/${t}/share`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(!r.ok)throw new Error(`Failed to generate shareable link: ${r.status}`);let n=yield r.json();return console.log("Generated shareable link:",n),n.link}catch(r){throw console.error("Error generating shareable link:",r),r}})}addProjectByShareId(t){return J(this,null,function*(){let i=yield this.getToken(),r=localStorage.getItem("username");console.log("Adding project by shareId:",t,"for user:",r);let n=yield fetch(`http://localhost:8080/projects/share/${t}?username=${r}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}});if(!n.ok)throw new Error(`Failed to fetch project: ${n.status}`);return yield n.json()})}static \u0275fac=function(i){return new(i||e)(si(ca),si(Pt))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ag(e,t){if(e&1){let i=Gn();U(0,"li",8),gr("click",function(){let n=Hn(i).$index,o=Yn();return qn(o.openProject(n,!0))}),U(1,"span",9),S(2),Z(),U(3,"span",10),S(4),Z()()}if(e&2){let i=t.$implicit;se(2),vr(i.name),se(2),vr(i.language)}}function Ig(e,t){e&1&&(U(0,"li",7),S(1,"No projects available"),Z())}function Pg(e,t){if(e&1){let i=Gn();U(0,"li",8),gr("click",function(){let n=Hn(i).$index,o=Yn();return qn(o.openProject(n,!1))}),U(1,"span",9),S(2),U(3,"span",11),S(4),Z()(),U(5,"span",10),S(6),Z()()}if(e&2){let i=t.$implicit;se(2),Qn("",i.name," "),se(2),Qn("(",i.author,")"),se(2),vr(i.language)}}function Ng(e,t){e&1&&(U(0,"li",7),S(1,"No projects available"),Z())}var Xu=class e{constructor(t,i,r,n){this.router=t;this.dialog=i;this.dashboardService=r;this.projectService=n;console.log("Component loaded"),this.getProjects(),this.addSharedProject()}shareId=null;projects=qe([]);refProjects=qe([]);timeout;openDialog(){this.dialog.open(Br,{width:"600px"}).afterClosed().subscribe(i=>{console.log("Dialog closed with:",i),i&&this.dashboardService.createProject(i)})}getProjects(){console.log("clicked"),this.dashboardService.getProjects().then(t=>{this.projects.set(t[0]),this.refProjects.set(t[1]),console.log("Projects from backend:",t)}).catch(t=>console.error("Error fetching projects:",t))}openProject(t,i){let r=i?this.projects()[t]:this.refProjects()[t];this.projectService.disconnect(),this.router.navigate(["/project",r.id])}addSharedProject(){this.shareId&&this.projectService.addProjectByShareId(this.shareId).then(()=>{console.log("ShareId project added")})}static \u0275fac=function(i){return new(i||e)(Qe(la),Qe(Lr),Qe(jr),Qe(Pn))};static \u0275cmp=ee({type:e,selectors:[["app-project"]],decls:20,vars:2,consts:[[1,"fab",3,"click"],[1,"fab-icon"],[1,"fab-text"],[1,"container"],[1,"projects-section"],[1,"projects-list"],[1,"project-item"],[1,"empty"],[1,"project-item",3,"click"],[1,"project-name"],[1,"project-language"],[1,"project-author"]],template:function(i,r){i&1&&(U(0,"div",0),gr("click",function(){return r.openDialog()}),U(1,"span",1),S(2,"+"),Z(),U(3,"span",2),S(4,"Create Project"),Z()(),U(5,"div",3)(6,"section",4)(7,"h2"),S(8,"Your Projects"),Z(),U(9,"ul",5),Wn(10,Ag,5,2,"li",6,Un,!1,Ig,2,0,"li",7),Z()(),U(13,"section",4)(14,"h2"),S(15,"Other's Projects"),Z(),U(16,"ul",5),Wn(17,Pg,7,3,"li",6,Un,!1,Ng,2,0,"li",7),Z()()()),i&2&&(se(10),zn(r.projects()),se(7),zn(r.refProjects()))},dependencies:[wi,aa],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{font-family:Segoe UI,Arial,sans-serif;background:#f0f2f5;color:#222;margin:0;padding:20px}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:30px;margin-top:20px}.projects-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 12px #00000014}.projects-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#0a3d91;margin-bottom:15px;font-size:20px;border-bottom:2px solid #1e5fe0;padding-bottom:8px}.projects-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.project-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f0f2f5;margin-bottom:10px;padding:12px 15px;border-radius:10px;cursor:pointer;transition:all .3s ease;border:1px solid #ccc}.project-item[_ngcontent-%COMP%]:hover{background:#0af;color:#fff;transform:translateY(-2px);box-shadow:0 6px 14px #0000001a}.project-name[_ngcontent-%COMP%]{font-weight:600}.project-author[_ngcontent-%COMP%]{font-size:13px;color:#1e5fe0;margin-left:5px}.project-language[_ngcontent-%COMP%]{font-size:14px;color:#0a3d91}.empty[_ngcontent-%COMP%]{text-align:center;color:#999;padding:20px}.btn-primary[_ngcontent-%COMP%]{padding:12px 22px;border-radius:10px;border:none;font-weight:600;font-size:15px;background:linear-gradient(135deg,#0af,#1e5fe0);color:#fff;cursor:pointer;box-shadow:0 4px 10px #00000026;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1e5fe0,#0a3d91);transform:translateY(-2px);box-shadow:0 6px 14px #0003}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:20px;margin-top:20px}.fab[_ngcontent-%COMP%]{position:fixed;bottom:25px;right:25px;height:60px;border-radius:30px;background:linear-gradient(135deg,#0af,#1e5fe0);color:#fff;font-size:18px;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 6px 14px #0003;transition:all .3s ease;-webkit-user-select:none;user-select:none;overflow:hidden;white-space:nowrap;width:60px;z-index:1000}.fab-icon[_ngcontent-%COMP%]{font-size:28px;margin-right:0;transition:margin .3s ease}.fab-text[_ngcontent-%COMP%]{opacity:0;max-width:0;overflow:hidden;transition:all .3s ease}.fab[_ngcontent-%COMP%]:hover{width:200px;justify-content:flex-start;padding:0 20px}.fab[_ngcontent-%COMP%]:hover   .fab-icon[_ngcontent-%COMP%]{margin-right:12px}.fab[_ngcontent-%COMP%]:hover   .fab-text[_ngcontent-%COMP%]{opacity:1;max-width:140px}']})};export{Pn as a,Xu as b};
