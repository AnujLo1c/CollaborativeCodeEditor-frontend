import './polyfills.server.mjs';
import{b as h,c as b}from"./chunk-543ZSC6O.mjs";import{a as v,b as s,c as x,d as C,f as _,g as w,h as M,l as P,n as S}from"./chunk-L47MOG3K.mjs";import{Aa as r,Ba as i,Ca as l,Ha as g,Ib as u,Lb as f,Oa as a,_ as c,ca as o,ga as d,za as p}from"./chunk-R7BEQ5AU.mjs";import"./chunk-S6KH3LOX.mjs";var y=class m{constructor(n,t,e,F,O){this.fb=n;this.auth=t;this.route=e;this.router=F;this.headerService=O;this.loginForm=this.fb.group({username:["",[s.required]],password:["",[s.required,s.minLength(5)]]}),this.shareId=this.route.snapshot.queryParamMap.get("shareId")}loginForm;shareId=null;onSubmit(){if(console.log("Form submitted:",this.loginForm.value),this.loginForm.valid){let n=this.loginForm.get("username")?.value,t=this.loginForm.get("password")?.value;this.auth.login(n,t).subscribe({next:e=>{localStorage.setItem("jwt",e),localStorage.setItem("username",n),console.log("Login successful, JWT stored."),this.headerService.updateLoginStatus(!0),this.shareId?this.router.navigate(["/project/share",this.shareId]):this.router.navigate(["/project"])},error:e=>{console.error("Login error:",e),alert("Login failed: "+(e.error||e.message||"Unknown error"))}})}else alert("Please enter a valid username and password.")}static \u0275fac=function(t){return new(t||m)(o(P),o(b),o(u),o(f),o(h))};static \u0275cmp=d({type:m,selectors:[["app-login"]],decls:13,vars:1,consts:[[1,"page-wrapper"],[1,"login-card"],[3,"ngSubmit","formGroup"],["type","text","formControlName","username"],["type","password","formControlName","password"],["type","submit"]],template:function(t,e){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Login"),i(),r(4,"form",2),g("ngSubmit",function(){return e.onSubmit()}),r(5,"label"),a(6,"Email"),i(),l(7,"input",3),r(8,"label"),a(9,"Password"),i(),l(10,"input",4),r(11,"button",5),a(12,"Login"),i()()()()),t&2&&(c(4),p("formGroup",e.loginForm))},dependencies:[S,_,v,x,C,w,M],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;padding-top:0;background:#f0f2f5}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2.5rem;border-radius:12px;box-shadow:0 8px 25px #00000026;width:100%;max-width:420px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;color:#222;margin-bottom:1.5rem;font-weight:700}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:6px;font-weight:600;color:#000;font-size:14px}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;margin-bottom:18px;border:1px solid #ccc;border-radius:6px;font-size:15px;box-sizing:border-box;transition:border-color .3s}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0af;box-shadow:0 0 5px #0af3}.login-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#0a3d91;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}.login-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e5fe0;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};export{y as Login};
