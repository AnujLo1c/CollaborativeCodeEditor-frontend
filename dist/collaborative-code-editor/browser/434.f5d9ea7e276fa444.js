"use strict";(self.webpackChunkcollaborative_code_editor=self.webpackChunkcollaborative_code_editor||[]).push([[434],{1434:(p,s,r)=>{r.r(s),r.d(s,{Login:()=>u});var o=r(4341),t=r(3664),g=r(978),l=r(2821),d=r(455);let u=(()=>{class i{fb;auth;route;router;headerService;loginForm;shareId=null;constructor(a,n,e,c,m){this.fb=a,this.auth=n,this.route=e,this.router=c,this.headerService=m,this.loginForm=this.fb.group({username:["",[o.k0.required]],password:["",[o.k0.required,o.k0.minLength(5)]]}),this.shareId=this.route.snapshot.queryParamMap.get("shareId")}onSubmit(){if(console.log("Form submitted:",this.loginForm.value),this.loginForm.valid){const a=this.loginForm.get("username")?.value,n=this.loginForm.get("password")?.value;this.auth.login(a,n).subscribe({next:e=>{localStorage.setItem("jwt",e),localStorage.setItem("username",a),console.log("Login successful, JWT stored."),this.headerService.updateLoginStatus(!0),this.router.navigate(this.shareId?["/project/share",this.shareId]:["/project"])},error:e=>{console.error("Login error:",e),alert("Login failed: "+(e.error||e.message||"Unknown error"))}})}else alert("Please enter a valid username and password.")}static \u0275fac=function(n){return new(n||i)(t.rXU(o.ok),t.rXU(g.N),t.rXU(l.nX),t.rXU(l.Ix),t.rXU(d.d))};static \u0275cmp=t.VBU({type:i,selectors:[["app-login"]],decls:13,vars:1,consts:[[1,"page-wrapper"],[1,"login-card"],[3,"ngSubmit","formGroup"],["type","text","formControlName","username"],["type","password","formControlName","password"],["type","submit"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2"),t.EFF(3,"Login"),t.k0s(),t.j41(4,"form",2),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(5,"label"),t.EFF(6,"Email"),t.k0s(),t.nrm(7,"input",3),t.j41(8,"label"),t.EFF(9,"Password"),t.k0s(),t.nrm(10,"input",4),t.j41(11,"button",5),t.EFF(12,"Login"),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",e.loginForm))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD],styles:[".page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;padding-top:0;background:#f0f2f5}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2.5rem;border-radius:12px;box-shadow:0 8px 25px #00000026;width:100%;max-width:420px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}.login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:26px;color:#222;margin-bottom:1.5rem;font-weight:700}.login-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:6px;font-weight:600;color:#000;font-size:14px}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;margin-bottom:18px;border:1px solid #ccc;border-radius:6px;font-size:15px;box-sizing:border-box;transition:border-color .3s}.login-card[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0af;box-shadow:0 0 5px #0af3}.login-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:14px;background-color:#0a3d91;color:#fff;border:none;border-radius:6px;font-size:16px;font-weight:600;cursor:pointer;transition:background-color .3s,transform .2s}.login-card[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1e5fe0;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}return i})()}}]);